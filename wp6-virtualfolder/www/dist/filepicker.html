<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <meta name="description" content="West-life Virtual Folder components">
  <meta name="author" content="Tomas Kulhanek">
  <meta name="copyright" content="West-Life consortium">
  <title>West-Life Virtual Folder File Picker</title>
  <meta name="msapplication-TileColor" content="#da532c">
  <link rel="stylesheet" href="src/w3.css"/>
</head>

<body>
<!--#include virtual="header.html" -->
<div class="w3-white w3-card w3-round-large w3-margin w3-padding">
<h1>File picker</h1>
  <a href="enablejavascript"

     onclick="openwindow('fileid',
   'https://portal.west-life.eu/virtualfolder/filepickercomponent.html'
   ); return false;">West-life File</a>

  <p>File:<a id="fileid" href=""></a></p>

<a href="enablejavascript.html" onclick="openfilepickerwindow('file'); return false;"> Open File Picker Component in a pop-up window.</a>
  <br/>After choosing the file and receiving it's url the pop-up window will be closed.
<p>File URL:<a id="file" href=""></a></p>
<h1>Upload-dir picker</h1>
  <a href="enablejavascript.html" onclick="openuploaddirpickerwindow('uploaddir'); return false;"> Open Upload Dir Picker Component in a pop-up window.</a>
  <br/>After choosing the directory and receiving it's url the pop-up window will be closed.
  <p>Directory URL:<a id="uploaddir" href=""></a></p>
</div>
<!-- content -->

<!--#include virtual="footer.html" -->
<script>
var popup;
var target;

function openfilepickerwindow(_target){
  openwindow(_target,"filepickercomponent.html")
}
function openuploaddirpickerwindow(_target){
  openwindow(_target,"uploaddirpickercomponent.html")
}
  //opens popup window in defined location
function openwindow(_target,href) {
  target=_target;
  popup=window.open(href, 'newwindow', 'width=640, height=480');

}
//receives message from popup window
  function receiveMessage(event)
  {
    document.getElementById(target).innerHTML=event.data;
    document.getElementById(target).setAttribute("href",event.data);
  }

window.addEventListener("message", receiveMessage, false);

</script>
</body>
</html>
