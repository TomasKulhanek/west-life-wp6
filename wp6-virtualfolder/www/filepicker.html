<html>
<head>
  <!--#include virtual="heads.html" -->
  <link rel="stylesheet" href="css/w3.css"/>
</head>

<body>
<!--#include virtual="header.html" -->
<div class="w3-sand w3-card w3-round-large w3-margin w3-padding">
<h1>File picker</h1>
<a href="filepickercomponent.html" onclick="openwindow('filepickercomponent.html'); return false;"> Open File Picker Component in a pop-up window.</a>
  <br/>After choosing the file and receiving it's url the pop-up window will be closed.
<p>File URL:<a id="file" href=""></a></p>
<h1>Upload-dir picker</h1>
  <a href="uploaddirpickercomponent.html" onclick="openwindow('uploaddirpickercomponent.html'); return false;"> Open Upload Dir Picker Component in a pop-up window.</a>
  <br/>After choosing the directory and receiving it's url the pop-up window will be closed.
  <p>Directory URL:<a id="uploaddir" href=""></a></p>
</div>
<!-- content -->

<!--#include virtual="footer.html" -->
<script>
var popup;

  //opens popup window in defined location
function openwindow(href) {
  popup=window.open(href, 'newwindow', 'width=640, height=480');

}
//receives message from popup window
  function receiveMessage(event)
  {
    //directory upload distinguished by '#D' at the end
    if (event.data.endsWith('#D')) {
      document.getElementById("uploaddir").innerHTML=event.data;
      document.getElementById("uploaddir").setAttribute("href",event.data);
    } else {
      document.getElementById("file").innerHTML = event.data;
      document.getElementById("file").setAttribute("href", event.data);
    }
  }

window.addEventListener("message", receiveMessage, false);

</script>
</body>
</html>
L
