<html>
<head>
  <!--#include virtual="/heads.html" -->
</head>

<body class="w3-container ">
<!--#include virtual="/header.html" -->
<div class="w3-sand w3-card w3-round-large w3-margin w3-padding">
<h1>File picker</h1>
<a href="filepickercomponent.html"  onclick="openwindow(); return false;"> Open File Picker Component in a pop-up window.</a>
  <br/>After choosing the file and receiving it's url the pop-up window will be closed.
<p>File:<i id="file"></i></p>
</div>
<!-- content -->

<!--#include virtual="/footer.html" -->
<script>
var popup;
var i;
  // When the popup has fully loaded, if not blocked by a popup blocker:

  // This does nothing, assuming the window hasn't changed its location.
function openwindow() {
  popup=window.open('filepickercomponent.html', 'newwindow', 'width=640, height=480');

}

  function receiveMessage(event)
  {
    console.log("received message")
    console.log(event);
    console.log(event.data);
    document.getElementById("file").innerHTML=event.data;
    //popup.close(); //closed by child
  }
  window.addEventListener("message", receiveMessage, false);
</script>
</body>
</html>
