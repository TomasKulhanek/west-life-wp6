{"version":3,"sources":["app.js","environment.js","main.js","autocomplete/vfAutocompleteSearch.js","b2dropcontrol/onedrivecontrol.js","dataset/app.js","dataset/environment.js","dataset/main.js","editor/fileeditor.js","filemanager2/app.js","filemanager2/environment.js","filemanager2/fmsettings.js","filemanager2/main.js","filemanager2/panel.js","filemanager2/viewpanelpv.js","filepicker/app.js","filepicker/environment.js","filepicker/filepanel.js","filepicker/main.js","filepicker/messages.js","pdbcomponents/checkurl.js","pdbcomponents/dataitem.js","pdbcomponents/dataset.js","pdbcomponents/entry-id.js","pdbcomponents/hideable.js","pdbcomponents/pdb-id.js","pdbcomponents/pdb-ids.js","pdbcomponents/sasclient.js","pdbcomponents/viewpanel.js","resources/index.js","tabs/messages.js","tabs/tabs.js","uploaddirpicker/app.js","uploaddirpicker/main.js","uploaddirpicker/uploaddirpanel.js","virtualfoldermodules/app.js","virtualfoldermodules/ccp4control.js","virtualfoldermodules/main.js","virtualfoldermodules/modulecontrol.js","virtualfoldermodules/modulesetting.js","virtualfoldermodules/scipioncontrol.js","virtualfoldermodules/virtuosocontrol.js","virtualfoldersetting/aliastable.js","virtualfoldersetting/app.js","virtualfoldersetting/clouddeployment.js","virtualfoldersetting/dropboxcontrol.js","virtualfoldersetting/genericcontrol.js","virtualfoldersetting/main.js","virtualfoldersetting/messages.js","virtualfoldersetting/storageprovider.js","virtualfoldersetting/urlutils.js"],"names":["App","message","debug","testing","configure","Promise","config","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","VfAutocompleteSearch","httpclient","http","resultBoxAlign","redirectOnClick","searchUrl","fields","group","groupLimit","sort","additionalParams","hideSuggestions","showing","blurSuggestions","evt","relatedTarget","className","startsWith","showSuggestions","focusSuggestions","value","search","term","url","fetch","response","json","resultGroups","data","grouped","category","groups","catch","console","log","err","keypressed","key","keyCode","originalTarget","submit","item","target","clicked","clickvalue","valueChanged","newValue","oldValue","length","searchMore","filter","fqVal","inject","client","Onedrivecontrol","heading","clientid","providerspath","CodeMirror","Fileeditor","el","ea","subscribe","selectFile","msg","file","senderid","imageurl","isimage","attached","editor","querySelector","codemirror","fromTextArea","cmTextarea","lineNumbers","mode","lineWrapping","theme","pid","webdavuri","name","endsWith","get","setValue","alert","Element","dialogService","closeviewer","setupFileManager","open","viewModel","model","wasCancelled","Prompt","controller","answer","visualizepdb","Storage","localStorage","getItem","settings","centerHorizontalOnly","activate","close","setItem","ok","Panel","selectTab","tabid","selectedView","selectedVisual","selectedDataset","selectedList","bind","ids","selectedTab","paneltabs","id","label","showpdb","publish","Viewpanelpv","viewfile","viewerdom","$","options","width","height","antialias","quality","viewer","pv","Viewer","fileurl","loadfromurl","process","pdb","structure","io","cartoon","color","ssSuccession","centerOn","loadlocalpdbfile","loadpdbfile","pdbentry","error","statusCode","statusText","loadfromredo","pdbentry2","substring","window","opener","postMessage","location","protocol","hostname","publicwebdavuri","Filepanel","files","filescount","path","lastpath","dynatable","serviceurl","withHeader","getpublicwebdavurl","populateFiles","pathname","dateTimeReviver","a","exec","Date","parseInt","toLocaleDateString","cdup","sepIndex","lastIndexOf","cddown","subdir","changefolder","folder","lock","refresh","dataresponse","JSON","parse","forEach","index","arr","alias","attributes","date","size","unshift","head","mypath2","mypath","signed_url","slice","panelid","SelectedFile","VisualizeFile","EditFile","Checkurl","showit","failmessage","method","status","Dataitem","entityids","selectedid","showitem","pdbred","itemPDBEntry","isPDBEntry","pdbredo","itemUniprotEntry","isUniprotEntry","entryname","molecule_type","push","entity_id","selectedValueChanged","stemel1","el1","cloneNode","stemel2","el2","newel","parent","parentNode","removeChild","setAttribute","appendChild","angular","bootstrap","hideitem","entry","test","Dataset","showlist","pdbdataset","pdbdataitem","pdblinkset","submitdisabled2","createnewdataset","getFullYear","getMonth","getDate","dataseturl","datasetlist","unselectdataset","selectdataset","Id","submitdataset","Entries","Name","removedataset","additem","removeitem","itemtodelete","put","stringify","EntryIdCustomAttribute","element","Hideable","defaulthide","changeshowit","PdbIdCustomAttribute","PdbIdsCustomAttribute","bootstrapped","pdbids","split","pdbidsfilter","obj","pdbidsjson","myclone","elementclone","children","Sasclient","searchParams","Viewpanel","sourceurl","sourceformat","pdbredoentry","pdburl","pdblitemol","replacepdblitemol","loadpdb","pdbviewer","parentnode","insertAdjacentHTML","SelectedTab","Tabs","activeid","tabs","active","opentab","Uploaddirpanel","selectThisDir","myfile","mydir","Ccp4control","posturl","Modulecontrol","href","enabled","okcallback","failcallback","res","enable","post","Modulesetting","Scipioncontrol","Virtuosocontrol","Aliastable","submitSettings","providers","temporary","removeProvider","confirm","delete","islocalhost","Clouddeployment","Dropbox","DropboxControl","urlutils","accesstoken","parseQueryString","hash","access_token","isAuthenticated","CLIENTIDENC","dbx","clientId","map","c","String","fromCharCode","charCodeAt","join","currentUrl","authurl","getAuthenticationUrl","e","initialize","type","securetoken","Genericcontrol","dropboxcontrol","editing","filespath","knowtoken","dropboxauthurl","selectedProvider","selectSettings","myHeaders","Headers","append","clear","username","filesystempath","accessurl","headers","addProvider","selectedDropbox","selectedFileSystem","selectedB2Drop","password","selectedWebDav","checkWebdav","btoa","doneCallback","errorCallback","body","Array","isArray","ResponseStatus","ErrorCode","Message","knownSecureToken","checked","SettingsSubmitted","SettingsSelected","SettingsRemoved","Storageprovider","showprovider","newProvider","UrlUtils","str","ret","Object","create","trim","replace","param","parts","shift","val","undefined","decodeURIComponent"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n  constructor() {\n    this.message = 'Hello World!';\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/**\n * Created by Tomas Kulhanek on 4/4/17.\n */\n\n\nimport {bindable} from 'aurelia-framework';\nimport {HttpClient} from 'aurelia-fetch-client';\nimport {computedFrom} from 'aurelia-framework';\n\n/** Virtual Folder Autocomplete Search client web component to work with API at abi.ac.uk\n *\n */\nexport class VfAutocompleteSearch {\n  @bindable value = \"\"; // value of input\n  @bindable placeholder = \"\";\n  @bindable size = \"40\";\n  @bindable submit;\n\n  static inject = [HttpClient];\n\n  constructor(httpclient) {\n    this.http = httpclient;\n    this.config = {\n      resultBoxAlign: 'left',\n      redirectOnClick: false,\n      searchUrl: '//www.ebi.ac.uk/pdbe/search/pdb-autocomplete/select',\n      fields: 'value,num_pdb_entries,var_name',\n      group: 'group=true&group.field=category',\n      groupLimit: '25',\n      sort: 'category+asc,num_pdb_entries+desc',\n      additionalParams: 'rows=20000&json.nl=map&wt=json'\n    }\n  }\n\n  /*hides the suggestion by setting the binded property to false*/\n  hideSuggestions() {\n      this.showing=false;\n  }\n\n  /* check if blured to related element, then no hiding, otherwise hide*/\n  blurSuggestions(evt) {\n    if (evt.relatedTarget && evt.relatedTarget.className.startsWith('result-card-item')) return;\n    this.hideSuggestions();\n  }\n\n  /* show the suggestions by setting the binded proparty to true*/\n  showSuggestions() {\n    this.showing=true;\n  }\n\n  /* reset the value in input field and shows */\n  focusSuggestions() {\n    this.value=\"\";\n    this.showSuggestions();\n  }\n\n  /**\n   * Method to search via AJAX call for the suggestion items which will be shown\n   */\n  search(){\n    let term = this.value;\n    let config = this.config;\n    let url = `${config.searchUrl}?${config.additionalParams}&${config.group}&fl=${config.fields}&sort=${config.sort}&group.limit=${config.groupLimit}&q=value:${term}*~10`\n    return this.http\n      .fetch(url)\n      .then(response => response.json())\n      .then(data => {\n        //console.log(\"search response:\")\n        //console.log(data);\n        this.resultGroups= data.grouped.category.groups\n        //console.log(this.resultGroups);\n      })\n      .catch( err => {console.log('error search()');console.log(err)});\n  }\n\n  /* just compute if the results group is empty */\n @computedFrom('resultGroups')\n get resultGroupsEmpty() {\n   return this.showing && this.resultGroups && this.resultGroups.length == 0;\n }\n\n /**\n  * Method triggered when a key is pressed,\n  * enter = submit, esc= hide suggestion\n  * @param {event} DOM event holding key pressed */\n keypressed(evt){\n   let key = evt.keyCode;\n   if (key === 13) {\n     /*may not be updated with input field as debounce has 750 ms this.submit({item:this.value});\n      */\n     console.log(\"keypressed(): submitting()\")\n     //this.hideSuggestions();\n     if (evt.originalTarget) this.submit({item: evt.originalTarget.value}) //in Firefox\n     else if (evt.target) this.submit({item: evt.target.value}) //in IE\n     this.hideSuggestions();\n   } else\n     if (key===27) this.hideSuggestions();\n   else\n     this.showSuggestions();\n\n   return true;\n }\n\n  /**\n   * Method triggered when a suggestion item was clicked,\n   * therefore taking it's value, submit and hide\n   * @param {clickvalue} value which was clicked and will be submitted */\n  clicked(clickvalue) {\n    console.log(\"clicked(): submitting()\")\n    this.value = clickvalue;\n    this.submit({item:clickvalue});\n    this.hideSuggestions();\n  }\n\n  /**\n   * Method triggered by AU when a value in input field is changed,\n   * using debounce - it is triggered only after some delay (750ms) */\n  valueChanged(newValue,oldValue){\n    if (this.value && this.value.length>0) {\n      this.search();\n\n    }\n  }\n\n /**\n  * Method to search for more suggestions api call\n  * @param {filter} a name of the group to be filtered\n  */\n  searchMore(filter) {\n    let term = this.value;\n      let fqVal = filter;\n        let config=this.config;\n    let url = `${config.searchUrl}?${config.additionalParams}&${config.group}&fl=${config.fields}&sort=${config.sort}&group.limit=-1&q=value:${term}*~10&fq=var_name:${fqVal}`\n    return this.http\n    //.get(`${this.pdbSolrUrl}&group.limit=-1&q=value:${term}*~10&fq=var_name:${fqVal}`)\n      .fetch(url)\n      .then(response => response.json())\n      .then(data => {\n        this.resultGroups= data.grouped.category.groups\n      })\n      .catch( err => {console.log('error searchMore()'); console.log(err);});\n  }\n}\n","/**\n * Created by Tomas Kulhanek on 12/8/16.\n */\nimport {HttpClient} from 'aurelia-http-client';\n//import {AControl} from './acontrol';\nlet client = new HttpClient();\n\nexport class Onedrivecontrol {\n\n  constructor() {\n    //super();\n    this.heading = \"ONEDRIVE connector\";\n    this.clientid = \"xUfizTokQv6mAiZ9sgzQnm0\";\n    this.providerspath= \"onedriveconnector\";\n  }\n}\n","/**\n * Created by Tomas Kulhanek on 2/21/17.\n */\n\nexport class App {\n\n  constructor () {\n  }\n\n\n}\n","export default {\n  debug: false,\n  testing: false\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n/**\n * Created by root on 3/10/17.\n */\n","/**\n * Created by Tomas Kulhanek on 2/17/17.\n */\n\nimport * as CodeMirror from \"codemirror\";\nimport \"codemirror/mode/clike/clike\";\nimport \"codemirror/mode/htmlmixed/htmlmixed\";\nimport \"codemirror/mode/javascript/javascript\";\n\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {HttpClient} from 'aurelia-http-client';\nimport {EditFile} from '../filepicker/messages';\nimport {bindable} from 'aurelia-framework';\n\n//import $ from 'jquery';\n\n\nexport class Fileeditor {\n  static inject = [Element,EventAggregator, HttpClient];\n  @bindable pid;\n\n  constructor(el,ea,httpclient) {\n    this.el = el;\n    this.ea = ea;\n    this.httpclient = httpclient;\n    this.ea.subscribe(EditFile, msg => this.selectFile(msg.file,msg.senderid));\n    this.imageurl=\"\";\n    this.isimage=false;\n  }\n\n  attached() {\n    let editor = this.el.querySelector(\".Codemirror\");\n    //prevent blured render if not shown before\n    if (editor==null) this.codemirror = CodeMirror.fromTextArea(this.cmTextarea, {\n      lineNumbers: true,\n      mode: \"text/x-less\",\n      lineWrapping: true,\n      theme: \"eclipse\"\n    });\n  }\n\n  selectFile(file,senderid) {\n    if (senderid!=this.pid) {\n      this.imageurl = file.webdavuri;\n      this.isimage= (file.name.endsWith('.JPG'))||(file.name.endsWith('.jpg'))||(file.name.endsWith('.PNG'))||(file.name.endsWith('.png'))||(file.name.endsWith('.GIF'))||(file.name.endsWith('.gif'))||(file.name.endsWith('.BMP'))||(file.name.endsWith('.bmp'))||(file.name.endsWith('.SVG'))||(file.name.endsWith('.svg'))\n      if (!this.isimage)\n        this.httpclient.get(file.webdavuri).then(\n          data => {\n\n            console.log(\"fileeditor.selectfile() loading:\" + file.webdavuri);\n            //console.log(data);\n            this.codemirror.setValue(data.response);\n\n          }\n        ).catch(error => {\n          alert('Error retrieving content from ' + file.webdavuri);\n        });\n\n    }\n  }\n}\n","import {EventAggregator} from 'aurelia-event-aggregator';\nimport {SelectedFile} from '../filepicker/messages';\nimport {computedFrom} from 'aurelia-framework';\nimport {DialogService} from 'aurelia-dialog';\nimport {inject} from 'aurelia-framework';\nimport {Prompt} from './fmsettings';\n\n//@inject(DialogService)\n\nexport class App {\n  static inject = [EventAggregator,DialogService];\n\n  constructor(ea,dialogService) {\n    this.ea = ea;\n    this.ea.subscribe(SelectedFile, msg => this.selectFile(msg.file,msg.senderid));\n    this.dialogService=dialogService;\n  }\n\n  selectFile(file,senderid){\n    //console.log(\"selectFile()\")\n    //console.log(file);\n    //console.log(senderid);\n    //window.opener.postMessage(window.location.protocol+\"//\"+window.location.hostname+file.webdavuri, \"*\");\n    //window.close();\n  }\n\n  closeviewer(){\n  }\n\n  setupFileManager(){\n    this.dialogService.open({viewModel: Prompt, model: 'File Manager Settings' }).then(response => {\n      //console.log(response);\n\n      if (!response.wasCancelled) {\n        //console.log('dialog OK');\n      } else {\n        //console.log('dialog cancelled');\n      }\n      //console.log(response.output);\n    });\n  }\n\n}\n","export default {\n  debug: true,\n  testing: false\n};\n","/**\n * Created by Tomas Kulhanek on 6/16/17.\n */\nimport {inject} from 'aurelia-framework';\nimport {DialogController} from 'aurelia-dialog';\n\n@inject(DialogController)\n\nexport class Prompt {\n\n  constructor(controller){\n    this.controller = controller;\n    this.answer = null;\n    this.visualizepdb = (typeof(Storage) !== \"undefined\") ? localStorage.getItem(\"visualizepdb\") ? localStorage.getItem(\"visualizepdb\") === \"true\": true : true;\n    //console.log(\"constructor visualizepdb:\"+this.visualizepdb);\n    controller.settings.centerHorizontalOnly = true;\n  }\n\n  activate(message) {\n    this.visualizepdb = (typeof(Storage) !== \"undefined\") ? localStorage.getItem(\"visualizepdb\") ? localStorage.getItem(\"visualizepdb\") === \"true\": true : true;\n    //console.log(\"active visualizepdb:\"+this.visualizepdb);\n    this.message = message;\n  }\n\n  close(){\n\n    if (typeof(Storage) !== \"undefined\") {\n      localStorage.setItem(\"visualizepdb\",this.visualizepdb);\n    }\n    //console.log(this.visualizepdb);\n    //console.log(localStorage.getItem(\"visualizepdb\"));\n    this.controller.ok()\n  }\n}\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .plugin('aurelia-dialog')\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/**\n * Created by Tomas Kulhanek on 2/10/17.\n */\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {SelectedFile,VisualizeFile,EditFile} from '../filepicker/messages';\nimport {SelectedTab} from '../tabs/messages';\nimport {computedFrom} from 'aurelia-framework';\nimport {bindable} from 'aurelia-framework';\n\nexport class Panel {\n    static inject = [EventAggregator];\n    @bindable pid;\n\n    constructor(ea) {\n        this.ea = ea;\n\n        this.ea.subscribe(SelectedFile, msg => this.selectFile(msg.file,msg.senderid));\n        this.ea.subscribe(SelectedTab, msg => this.selectTab(msg.tabid));\n        //generate unique id from time\n        //this.pid = new Date().valueOf();\n        this.selectedView=this.selectedVisual=this.selectedDataset=false;\n        this.selectedList=true;\n    }\n\n    bind(){\n      this.ids=[this.pid+'.list',this.pid+'.view',this.pid+'.visual',this.pid+'.analyse',this.pid+'.dataset']; //prefix uid to tab ids\n\n      this.selectedTab= this.ids[0];\n      this.paneltabs = [\n        { id: this.ids[0], label: 'File List'},\n        { id: this.ids[1], label: 'View/Edit'},\n        { id: this.ids[2], label: 'Visualize'},\n        { id: this.ids[3], label: 'Dataset'}\n      ];\n    }\n\n    selectTab(tabid){\n        //if uid belongs to mine - change tab, otherwise ignore this message\n        if (tabid.startsWith(this.pid)) {\n            this.selectedTab = tabid;\n            this.selectedList = this.selectedTab == this.ids[0];\n            this.selectedView = this.selectedTab == this.ids[1];\n            this.selectedVisual = this.selectedTab == this.ids[2];\n            this.selectedDataset = this.selectedTab == this.ids[3];\n        }\n    }\n\n    selectFile(file,senderid) {\n      //default action, visualize pdb, if localStorage.getItem(\"visualizepdb\") is defined then it needs to be true,\n      let showpdb = file.webdavuri.endsWith('pdb') ? (typeof(Storage) !== \"undefined\") ? localStorage.getItem(\"visualizepdb\") ? localStorage.getItem(\"visualizepdb\") === \"true\" : true : true : false;\n      if (senderid!=this.pid) {\n        if (showpdb) {\n          //visualize\n          this.selectTab(this.ids[2]);\n          this.ea.publish(new VisualizeFile(file,senderid));\n        } else {\n          //edit/raw view\n          this.selectTab(this.ids[1]);\n          this.ea.publish(new EditFile(file,senderid));\n        }\n      }\n    }\n}\n","/**\n * Created by Tomas Kulhanek on 11/29/16.\n */\n\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {SelectedFile,VisualizeFile} from '../filepicker/messages';\nimport {HttpClient} from 'aurelia-http-client';\n\n\nexport class  Viewpanelpv {\n  static inject = [EventAggregator,HttpClient];\n    constructor(ea,httpclient) {\n      this.ea = ea;\n      this.httpclient = httpclient;\n      this.ea.subscribe(VisualizeFile, msg => this.viewfile(msg.file));\n    }\n\n    attached(){\n        console.log('viewpanel.attached()')\n      this.viewerdom = $(\".fileviewer\")[0];\n      console.log(this.viewerdom);\n      var options = {\n        width: '1200',\n        height: '600',\n        antialias: true,\n        quality : 'medium'\n      };\n      // insert the viewer under the Dom element with id 'gl'.\n        console.log(this);\n        console.log(this.viewer);\n        if (!this.viewer)\n            this.viewer = pv.Viewer(this.viewerdom, options);\n        }\n\n    viewfile(file) {\n      //if (file.webdavuri.endsWith('pdb')) {\n        this.fileurl = file.webdavuri;\n        console.log(\"viewfile()\");\n        console.log(file.webdavuri);\n        this.loadfromurl(file.webdavuri);\n    }\n\n    // given the contents of a PDB file, show the structure\n    process(pdb) {\n        var structure = pv.io.pdb(pdb);\n        this.viewer.cartoon('protein', structure, { color : color.ssSuccession() });\n        this.viewer.centerOn(structure);\n    }\n\n    loadlocalpdbfile() {\n    }\n\n    loadpdbfile() {\n        var url = 'http://files.rcsb.org/view/' + this.pdbentry + '.pdb';\n        //console.log('loadpdbfile()');\n        this.loadfromurl(url)\n    }\n\n    loadfromurl(url) {\n        this.httpclient.get(url)\n            .then(data => {\n              console.log(\"loadfromurl() OK\");\n              console.log(data.response);\n                this.process(data.response);\n            })\n            .catch(error => {\n              console.log(\"loadfromurl() error\");\n                console.log(error);\n                alert('Sorry, response: '+error.statusCode+':'+error.statusText+' when trying to get: '+url);\n            });\n    }\n\n     loadfromredo() {\n       this.loadfromurl('http://www.cmbi.ru.nl/pdb_redo/'\n    +this.pdbentry2.substring(1,3)+'/'\n    +this.pdbentry2+'/'+this.pdbentry2+'_final.pdb')\n}\n\n}\n\n","import {EventAggregator} from 'aurelia-event-aggregator';\nimport {SelectedFile} from './messages';\n\nexport class App {\n  static inject = [EventAggregator];\n\n  constructor(ea) {\n    this.ea = ea;\n    this.ea.subscribe(SelectedFile, msg => this.selectFile(msg.file));\n  }\n\n  selectFile(file){\n    console.log(\"selectFile()\")\n    console.log(file);\n    window.opener.postMessage(window.location.protocol+\"//\"+window.location.hostname+file.publicwebdavuri, \"*\");\n      //+\" \"+window.location.protocol+\"//\"+window.location.hostname+file.publicwebdavuri, \"*\");\n    window.close();\n  }\n\n}\n","export default {\n  debug: true,\n  testing: false\n};\n","/**\n * created by Tomas Kulhanek on 9/28/16.\n */\n\nimport 'whatwg-fetch';\nimport {HttpClient} from 'aurelia-http-client';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {SelectedFile} from './messages';\nimport {bindable} from 'aurelia-framework';\n\nexport class Filepanel{\n  static inject = [EventAggregator,HttpClient];\n  @bindable panelid;\n\n  constructor(ea,httpclient) {\n        this.ea = ea;\n        this.client = httpclient;\n        this.files = [];\n        this.filescount = this.files.length;\n        this.path= \"\";\n        this.lastpath=\"\";\n        this.dynatable = {};\n        this.serviceurl = \"/metadataservice/files\";\n        //http to accept json\n        this.client.configure(config=>{\n            config.withHeader('Accept','application/json');\n            config.withHeader('Content-Type','application/json');\n        });\n        //console.log(\"filepanel tableid:\"+this.panelid);\n        this.getpublicwebdavurl=\"/api/authproxy/get_signed_url/\"\n    }\n\n    //triggered after this object is placed to DOM\n    attached() {\n\n        //read the directory infos\n        this.client.get(this.serviceurl)\n            .then(data => {\n                if (data.response) {\n                    this.populateFiles(data.response);\n                }\n            }).catch(error => {\n                //handle 403 unauthorized\n                if (error.statusCode == 403) {\n                  //try to login\n                  console.log(\"redirecting\");\n                  window.location = \"/login?next=\" + window.location.pathname;\n                  //window.location =\n                } else {\n                  console.log('Error');\n                  console.log(error);\n                  //alert('Sorry, response: ' + error.statusCode + ':' + error.statusText + ' when trying to get: ' + this.serviceurl);\n                }\n            });\n      //console.log(\"filepanel tableid:\"+this.panelid);\n    }\n\n    //parse .NET encoded Date in JSON\n    dateTimeReviver(key, value) {\n        var a;\n        if (typeof value === 'string') {\n            a = /\\/Date\\(([\\d\\+]*)\\)\\//.exec(value);\n            if (a) {\n                return new Date(parseInt(a[1])).toLocaleDateString('en-GB');\n            }\n        }\n        return value;\n    }\n\n    //removes last subdirectory\n    cdup(){\n        this.lastpath= this.path;\n        let sepIndex= this.path.lastIndexOf('/');\n        this.path = this.path.substring(0,sepIndex);\n    }\n\n    //adds subdirectory to the path\n    cddown(subdir) {\n      this.lastpath=this.path;\n        this.path+='/'+subdir;\n    }\n\n\n    //change folder, reads the folder content and updates the table structure\n    changefolder(folder){\n        if (!this.lock) {\n            this.lock = true;\n            if (folder) {\n                if (folder == '..') this.cdup();\n                else this.cddown(folder);\n            }\n\n          this.client.get(this.serviceurl + this.path)\n                .then(data => {\n                    if (data.response) {\n                        this.populateFiles(data.response);\n                        //update files in table view\n                    }\n                    this.lock = false;\n                }).catch(error => {\n                console.log('Error');\n                console.log(error);\n                alert('Sorry, response: '+error.statusCode+':'+error.statusText+' when trying to get: '+this.serviceurl+this.path);\n                this.lock = false;\n                this.path=this.lastpath;\n            });\n        } //else doubleclick when the previous operation didn't finished\n    }\n\n    //refresh the file content\n    refresh() {\n        this.changefolder(); //changefolder with empty folder - just refresh\n    }\n\n    //parses response and fills file array with customization (DIRS instead of size number)\n    populateFiles(dataresponse){\n\n        this.files = JSON.parse(dataresponse,this.dateTimeReviver);//populate window list\n        this.filescount =  this.files.length;\n        this.files.forEach (function (item,index,arr){\n          if(!arr[index].name && arr[index].alias) {\n            arr[index].name=arr[index].alias;\n            arr[index].attributes = 16;\n            arr[index].date=\"\";\n          }\n          if (arr[index].attributes & 16) arr[index].size=\"DIR\";\n          else\n            //convert to 4GB or 30MB or 20kB or 100b\n            arr[index].size=~~(arr[index].size/1000000000)>0?~~(arr[index].size/1000000000)+\"GB\":(~~(arr[index].size/1000000)>0?~~(arr[index].size/1000000)+\"MB\":(~~(arr[index].size/1000)>0?~~(arr[index].size/1000)+\"kB\":arr[index].size+\" b\"));\n        });\n      if (this.path.length>0) {//non root path\n        this.files.unshift({name: \"..\", size: \"UP DIR\",date:\"\"}); //up dir item\n      }\n\n    }\n\n    selectFile(file){\n      //console.log(\"selectFile(\"+file+\") panelid:\"+this.panelid);\n      if (file.size.endsWith && file.size.endsWith('DIR')) this.changefolder(file.name);\n      else {\n        //HEAD the file - so it can be obtained - cached by metadata service, fix #45\n        let fileurl=this.serviceurl + this.path + '/' + file.name\n        this.client.head(fileurl)\n          .then( response =>{\n            //console.log('file head'+fileurl);\n            //console.log(response);\n          }\n        ).catch(error => {\n          console.log(\"Error when geting metadata information about file:\")\n          console.log(error);\n        });\n        //reconstructs public url\n        this.client.get(this.getpublicwebdavurl)\n          .then(data => {\n            if (data.response) {\n              let mypath2=JSON.parse(data.response);\n              let mypath = mypath2.signed_url;\n              mypath+= this.path.startsWith('/')?this.path.slice(1):this.path;\n              file.publicwebdavuri=mypath+\"/\"+file.name;\n              this.ea.publish(new SelectedFile(file, this.panelid));\n              //this.ea.publish(new SelectedFile(file,this.panelid));\n            }\n          });\n\n      }\n    }\n\n}\n\n\n\n\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/**\n * Created by Tomas Kulhanek on 1/9/17.\n */\n\nexport class SelectedFile {\n  constructor(file,senderid){\n    this.file = file;\n    this.senderid = senderid;\n  }\n}\n\nexport class VisualizeFile {\n  constructor(file,senderid){\n    this.file = file;\n    this.senderid = senderid;\n  }\n}\n\nexport class EditFile {\n  constructor(file,senderid){\n    this.file = file;\n    this.senderid = senderid;\n  }\n}\n","/**\n * Created by Tomas Kulhanek on 5/19/17.\n */\nimport {bindable} from 'aurelia-framework';\nimport {HttpClient} from 'aurelia-fetch-client'; //fetch\n\nexport class Checkurl {\n  static inject = [HttpClient];\n  @bindable failmessage=\"No data available for this structure.\";\n  @bindable url;\n  constructor(httpclient){\n    this.client = httpclient;\n    this.showit=false;\n    //this.message=\"\";\n  }\n\n  attached(){\n    console.log(\"Checkurl component:\"+this.url+\" message:\"+this.failmessage);\n\n    this.client.fetch(this.url, {method: 'HEAD'})\n      .then(response => {\n        console.log(\"checkurl response:\");\n        console.log(response);\n        if (response.status==200) this.showit=true;\n        //this.message = this.failmessage;\n      })\n      .catch(error =>{\n        this.showit=false;\n        console.log('checkurl error:'+error);\n        //this.message = this.failmessage;\n      });\n  }\n\n}\n\n","/**\n * created by Tomas Kulhanek on 3/15/17.\n */\nimport {bindable} from 'aurelia-framework';\nimport {HttpClient} from 'aurelia-fetch-client'; //fetch\n\nexport class Dataitem {\n\n  static inject = [HttpClient];\n  @bindable item = \"\";\n\n  constructor(httpclient) {\n    //console.log('dataitem()')\n    //console.log(this.item);\n    this.serviceurl = \"//www.ebi.ac.uk/pdbe/api/pdb/entry/molecules/\"\n    this.client = httpclient;\n\n    this.entityids = [1];\n    this.selectedid = this.entityids[0];\n    this.showitem = false;\n    let location = window.location.protocol;\n    this.pdbred=\"cc\";\n//    this.httpsprotocol=location.startsWith('https'); //used to detect/hide buggy components\n  }\n\n  bind() {\n    this.itemPDBEntry = this.isPDBEntry(this.item);\n    this.pdbredo = this.item[1]+this.item[2]; //2nd and 3rd character\n    console.log(this.pdbredo);\n    //this.showitem = this.itemPDBEntry;\n    //this.showuniprotitem = !this.itemPDBEntry;\n    this.itemUniprotEntry = this.isUniprotEntry(this.item);\n    if (this.itemPDBEntry) {\n\n      this.client.fetch(this.serviceurl + this.item)\n        .then(response => response.json())\n        .then(data => {\n\n          //console.log(\"ENTRY ID Fetch, data:\");\n          //console.log(data)\n          this.entityids=[];\n          for (var entryname in data) {  //data.2hhd data.4yg0 data.1cbs data.{ }   for (var ... in ...) { } //enumeration\n            for (let item of data[entryname]) { //data[{}] == data[2hhd] == data.2hhd, for (let ... of ...)  [ ]  //array\n              //only polypeptide molecules can be viewed by components\n              if (item.molecule_type.startsWith(\"polypeptide\"))\n                this.entityids.push(item.entity_id);\n            }\n          }\n          this.selectedid=this.entityids[0]; //first one\n\n        }).catch(error => {\n\n        console.log('Error dataitem().fetch() of \"'+this.serviceurl + this.item+'\"');\n        console.log(error);\n      });\n    }\n\n  }\n\n  attached() {\n  }\n\n  selectedValueChanged() {\n    //create stem clones of element\n    if (!this.stemel1 && this.itemPDBEntry) {\n      this.stemel1 = this.el1.cloneNode(); //pure <pdb-topology\n      this.stemel2 = this.el2.cloneNode(); //pure <pdb-sequence\n    }\n\n    //replacing first element\n    let newel=this.stemel1.cloneNode();\n\n    //repleace old <pdb-topology with new pure <pdb-topology\n    let parent = this.el1.parentNode;\n    //remove the element - angular\n    parent.removeChild(this.el1);\n    //append the clean clone\n    newel.setAttribute(\"entity-id\",this.selectedid)\n    this.el1 = parent.appendChild(newel);\n    angular.bootstrap(newel, ['pdb.component.library']);\n\n    //replacing second element\n    newel=this.stemel2.cloneNode();\n\n    parent = this.el2.parentNode;\n    //remove the element - angular\n    parent.removeChild(this.el2);\n    //append the clean clone\n    newel.setAttribute(\"entity-id\",this.selectedid)\n\n    this.el2 =parent.appendChild(newel);\n    angular.bootstrap(newel, ['pdb.component.library']);\n  }\n\n  hideitem() {\n      this.showitem = !this.showitem;\n  }\n\n  isPDBEntry(entry) {\n    return /^[0-9][A-Za-z0-9]{3}$/.test(entry);\n  }\n  isUniprotEntry(entry) {\n    return /^[A-Z][0-9][A-Z0-9]{4}[A-Z0-9]*$/.test(entry);\n  }\n\n}\n","/**\n * created by Tomas Kulhanek on 2/21/17.\n */\n\nimport 'whatwg-fetch';\nimport {HttpClient} from \"aurelia-http-client\";\nimport {computedFrom} from 'aurelia-framework';\nimport {bindable} from 'aurelia-framework';\n\n//Model view controller\n//Model view viewmodel\n\nexport class Dataset {\n  static inject = [HttpClient];\n  @bindable panelid;\n\n  constructor (httpclient) {\n    this.client = httpclient;\n    this.client.configure(config=> {\n      config.withHeader('Accept', 'application/json');\n      config.withHeader('Content-Type', 'application/json');\n    });\n    this.showitem=true;\n    this.showlist=true;\n    this.pdbdataset = [];\n    this.pdbdataitem = \"\";\n    this.pdblinkset = [];\n    this.pdbdataitem = \"\";\n    this.submitdisabled2 = true;\n    this.id=0;\n  }\n\n  createnewdataset(){\n    this.pdbdataset = [];\n    this.pdbdataitem = \"\";\n    this.pdblinkset = [];\n    this.pdbdataitem = \"\";\n    this.submitdisabled2 = true;\n    let date = new Date();\n    this.name=\"dataset-\"+date.getFullYear()+\".\"+(date.getMonth()+1)+\".\"+date.getDate();\n    this.id = 0;\n    this.showlist=false;\n  }\n\n\n  //@computedFrom('submitdisabled2')\n  //TODO check,test to trigger only when pdbdataset is changed\n  get canSubmit() {\n    //console.log(\"disabled? \"+this.pdbdataset.length);\n    if (this.pdbdataset.length>0)\n      return true;\n    else\n      return false;\n  }\n\n  attached(){\n    this.client.get(this.dataseturl).then(data=>\n    {\n      //console.log(\"dataset.attached(), data:\")\n      //console.log(data)\n      this.datasetlist = JSON.parse(data.response);\n      //console.log(this.datasetlist)\n    })\n  }\n\n  unselectdataset(item){\n    this.showlist=true;\n  }\n\n  selectdataset(item){\n    //console.log(\"selectdataset()\");\n    //console.log(item)\n    this.client.get(this.dataseturl+\"/\"+item.Id).then(data=>\n    {\n      //console.log(\"selecteddataset(), data:\")\n      //console.log(data)\n      this.submitdataset=JSON.parse(data.response)\n      //console.log(this.submitdataset)\n      this.pdbdataset = this.submitdataset.Entries\n      this.name = this.submitdataset.Name\n      this.id = this.submitdataset.Id\n      this.showlist = false\n    })\n  }\n\n  removedataset(item){\n    console.log(\"removedataset() not implemented\");\n    console.log(item)\n  }\n\n  additem(item){\n    console.log(\"additem()\");\n    console.log(item);\n    this.pdbdataset.unshift(item);\n\n    //this.canSubmit = this.pdbdataset.length>0?true:false;\n  }\n\n  removeitem(itemtodelete){\n    this.pdbdataset = this.pdbdataset.filter(item => item!== itemtodelete);\n  }\n\n\n  //model-view -viewmodel\n  hideitem() {\n    this.showitem = ! this.showitem;\n  }\n\n\n  submit(){\n    this.client.put(\"/metadataservice/dataset\",JSON.stringify(this.pdbdataset))\n      .then(data =>{\n        console.log(\"data response\");\n        console.log(data);9\n      })\n      .catch(error =>{\n        console.log(error);\n        alert('Sorry. Dataset not submitted  at '+this.serviceurl+' error:'+error.response+\" status:\"+error.statusText)\n      });\n  }\n}\n","/**\n * Created by Nurul on 3/10/17.\n */\n\nexport class EntryIdCustomAttribute {\n  static inject = [Element]\n\n  constructor (element) {\n    this.element = element;\n  }\n\n  /* set's DOM atribute to the binded value.\n   valueChanged() is triggered by Aurelia,\n   when the value is bind - before attached()\n   this.value\n   */\n  valueChanged(newValue,oldValue){\n    this.element.setAttribute('entry-id',this.value);\n  }\n\n\n\n  /* bootstrap the pdb component library just from the element */\n  attached(){\n    angular.bootstrap(this.element, ['pdb.component.library']);\n  }\n}\n","/**\n * Created by Tomas Kulhanek on 3/16/17.\n */\nimport {bindable} from 'aurelia-framework';\nexport class Hideable {\n  @bindable title;\n  @bindable defaulthide=false;\n  constructor(){\n    this.showit=true;\n  }\n\n  bind(){\n    if (this.defaulthide) {\n      this.showit=false;\n    }\n  }\n\n  changeshowit(){\n    this.showit=!this.showit;\n  }\n}\n","/**\n * Created by Tomas Kulhanek on 2/27/17.\n */\n\n// PdbId => pdb-id MyCustomAttribute => my-custom-attribute\n\nexport class PdbIdCustomAttribute {\n  static inject = [Element]\n\n  constructor (element) {\n    this.element = element;\n  }\n\n  /* set's DOM atribute to the binded value.\n   valueChanged() is triggered by Aurelia,\n   when the value is bind - before attached()\n   this.value\n   */\n  valueChanged(newValue,oldValue){\n   //console.log('valueChanged() element:'+this.element.tagName+\" newvalue:\"+newValue+' this.value:'+this.value+' current.attribute.pdb-id:'+ this.element.getAttribute('pdb-id'));\n    // <pdb-redo pdb-id=\"item\"></pdb-redo> -> valueChange()\n   this.element.setAttribute('pdb-id',this.value);\n   //  <pdb-redo pdb-id=\"2sc3\">\n\n   //console.log(this.element.getAttribute('pdb-id'));\n  }\n\n\n\n  /* bootstrap the pdb component library just from the element */\n  attached(){\n    //console.log('attached element with custom attribute pdb-id:')\n    //console.log(this.element.getAttribute('pdb-id'));\n    angular.bootstrap(this.element, ['pdb.component.library']);\n  }\n}\n","/**\n * Created by Tomas Kulhanek on 2/27/17.\n */\n\nexport class PdbIdsCustomAttribute {\n  static inject = [Element]\n\n  constructor (element) {\n    //console.log('pdbids()');\n    this.element = element;\n    this.bootstrapped=false;\n  }\n\n  /* set's DOM atribute to the binded value.\n     valueChanged() is triggered by Aurelia,\n     when the value is bind - before attached()\n  */\n  valueChanged(newValue,oldValue) {\n    //console.log('pdbids.valueChanged() element:'+this.element.tagName+\" newvalue:\"+newValue+' this.value:'+this.value+' current.attribute.pdb-ids:'+ this.element.getAttribute('pdb-ids'));\n    //console.log(this.value); // pdb-ids separated by coma -\n    // \"2hhd,1r6a,4yg0\"\n    if (this.value.length>0) {\n\n      this.pdbids = this.value.split(',');\n      // [ 2hhd, 1r6a, 4yg0 ] -> array()\n      //filter pdbids, uniprot and other entries are not included\n      this.pdbidsfilter = this.pdbids.filter(function (obj) {\n        return /^[0-9][A-Za-z0-9]{3}$/.test(obj);\n      });\n\n      this.pdbidsjson = JSON.stringify(this.pdbidsfilter);\n      // \"[ \"2hhd\", \"1r6a\", \"4yg0\" ]\"\n      if (this.pdbids.length > 0) {        //bootstrap only if something is in an array\n        if (this.bootstrapped) { //replace the angularized element with clean clone\n          //create clone from stem clone\n          var myclone = this.elementclone.cloneNode();\n          //console.log('angular element');\n          //console.log(this.element);\n          this.parent = this.element.parentNode;\n          //remove the element - angular\n          this.parent.removeChild(this.element);\n          //append the clean clone\n          this.parent.appendChild(myclone);\n          this.element = this.parent.children[0];\n        } else {\n          this.elementclone = this.element.cloneNode(); //stem clone\n\n        }\n        this.element.setAttribute('pdb-ids', this.pdbidsjson);\n        angular.bootstrap(this.element, ['pdb.component.library']);\n        this.bootstrapped = true;\n      }\n    }\n  }\n\n}\n\n","/**\n * created by Tomas Kulhanek on 2/27/17.\n */\n\nexport class Sasclient {\n\n  constructor(httpclient){\n    this.httpclient = httpclient;\n    this.config = {\n      resultBoxAlign: 'left',\n      redirectOnClick: false,\n      searchUrl: '//www.ebi.ac.uk/pdbe/search/pdb-autocomplete/select',\n      fields: 'value,num_pdb_entries,var_name',\n      group: 'group=true&group.field=category',\n      groupLimit: '25',\n      sort: 'category+asc,num_pdb_entries+desc',\n      searchParams: 'rows=20000&json.nl=map&wt=json'\n    }\n  }\n\n  search(term){\n    //http://www.ebi.ac.uk/pdbe/search/pdb/select?fl=pdb_id,organism_synonyms,number_of_bound_entities,+number_of_protein_chains,experimental_method,+experiment_data_available,expression_host_sci_name,+citation_year,+entry_organism_scientific_name,number_of_RNA_chains,number_of_DNA_chains,sample_preparation_method,emdb_id&group=true&group.field=pdb_id&group.limit=100&rows=1000&wt=json&q=pdb_id:(1cbs)\n    //http://www.ebi.ac.uk/pdbe/search/pdb-autocomplete/select?rows=20000&json.nl=map&wt=json&group=true&group.field=category&fl=value,num_pdb_entries,var_name&sort=category+asc,num_pdb_entries+desc&group.limit=25&q=value:2hh*~10\n    //http://www.ebi.ac.uk/pdbe/search/pdb-autocomplete/select?rows=20000&json.nl=map&wt=json&fl=value,num_pdb_entries,var_name&group=true&group.field=category&sort=category+asc,num_pdb_entries+desc&group.limit=25&q=value:2hh*~10\n    let url = this.config.searchUrl+\"?\"+this.config.searchParams+\"&fl=\"+this.config.fields+ \"&\"+this.config.group+\"&sort=\"+this.config.sort+\"&group.limit=\"+this.config.groupLimit+\"&q=value:\"+term+\"*~10\";\n\n    this.httpclient.get(url)\n      .then(data => {\n        if (data.response) {\n\n          return data.response.grouped.category.groups\n        }\n      }).catch(error => {\n\n      console.log('Error');\n      console.log(error);\n    });\n  }\n\n  searchMore(term) {\n\n  }\n\n}\n","\n/**\n * Created by Tomas Kulhanek on 11/29/16.\n */\n\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {VisualizeFile} from '../filepicker/messages';\nimport {HttpClient} from 'aurelia-http-client';\nimport {bindable} from 'aurelia-framework';\n\nexport class  Viewpanel {\n    static inject = [Element,EventAggregator, HttpClient];\n    @bindable pid;\n\n    constructor(el,ea, httpclient) {\n        this.element = el;\n        this.ea = ea;\n        this.httpclient = httpclient;\n      this.ea.subscribe(VisualizeFile, msg => this.viewfile(msg.file,msg.senderid));\n        //this.uid = new Date().valueOf().toString();\n        this.sourceurl=\"\";\n        this.sourceformat=\"pdb\";\n      this.pdbentry = \"\";\n      this.pdbredoentry=\"\";\n      this.pdburl= \"\";\n    }\n\n    attached() {\n      angular.bootstrap(this.element.querySelector('#pdbviewer'), ['pdb.component.library']);\n    }\n\n    viewfile(file,senderid) {\n        if (senderid!=this.pid) {\n          console.log(\"viewfile \" + file.webdavuri);\n          this.pdburl=file.webdavuri;\n          var pdblitemol = '<pdb-lite-mol load-ed-maps=\"true\" source-url=\"' + this.pdburl + '\" pdb-id=\"\\'\\'\" source-format=\"pdb\"></pdb-lite-mol>';\n          this.replacepdblitemol(pdblitemol);\n        }\n    }\n\n  loadfromredo() {\n    //http://pdb-redo.eu/db/1r6a/1r6a_final.pdb;jsessionid=C2F739E5913AEA9460EDA0B9F024C471\n    this.pdburl = \"//pdb-redo.eu/db/\"+this.pdbredoentry+\"/\"+this.pdbredoentry+\"_final.pdb\";//'http://www.cmbi.ru.nl/pdb_redo/'+this.pdbredoentry.substring(1,3)+'/'+this.pdbredoentry+'/'+this.pdbredoentry+'_final.pdb';\n    var pdblitemol = '<pdb-lite-mol load-ed-maps=\"true\" source-url=\"' + this.pdburl + '\" pdb-id=\"\\'\\'\" source-format=\"pdb\"></pdb-lite-mol>';\n    this.replacepdblitemol(pdblitemol);\n  }\n\n\n  loadpdb() {\n    //console.log(\"loadpdb \"+this.pdbentry);\n    this.pdburl=this.pdbentry;\n    var pdblitemol = '<pdb-lite-mol load-ed-maps=\"true\" pdb-id=\"\\''+this.pdbentry+'\\'\"></pdb-lite-mol>'\n    this.replacepdblitemol(pdblitemol);\n  }\n\n  replacepdblitemol(pdblitemol) {\n      //remove pdblitemol\n      var pdbviewer = this.element.querySelector('#pdbviewer');\n      var parentnode = this.element.querySelector('#pdbwrapper');\n      parentnode.removeChild(pdbviewer);\n      //create pdblitemol\n      parentnode.insertAdjacentHTML('afterbegin', '<div style=\"position:relative;height:400px;width:800px;\" id=\"pdbviewer\">'+pdblitemol+'</div>');\n\n      //call angular bootstrap\n      angular.bootstrap(this.element.querySelector('#pdbviewer'), ['pdb.component.library']);\n    }\n\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","/**\n * Created by Tomas Kulhanek on 1/9/17.\n */\n\nexport class SelectedTab {\n  constructor(tabid){\n    this.tabid = tabid;\n  }\n}\n","import {bindable, inject} from 'aurelia-framework';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {SelectedTab} from './messages';\n//import $ from 'jquery';\n//import {tabs} from 'jquery-ui';\n\n\nexport class Tabs {\n    @bindable tabs = null;\n    static inject = [Element,EventAggregator];\n\n\n    constructor(el,ea) {\n        this.id = el.id;\n        this.element= el;\n        this.ea=ea;\n    }\n\n    attached() {\n        //console.log(\"tabs.atached() tabs: \"+this.tabs);\n      this.activeid=this.tabs[0];\n      this.activeid.active = true;\n      //this.tabs[]\n    }\n\n    opentab(tabid){\n      //old active tab is not active anymore\n      this.activeid.active = false;\n\n      this.activeid=tabid;\n      //new active tab is active\n      this.activeid.active=true;\n        //console.log(\"Tabs selected:\"+this.activeid);\n        this.ea.publish(new SelectedTab(this.activeid.id));\n    }\n\n}\n","import {EventAggregator} from 'aurelia-event-aggregator';\nimport {SelectedFile} from '../filepicker/messages';\n\nexport class App {\n  static inject = [EventAggregator];\n\n  constructor(ea) {\n    this.ea = ea;\n    this.ea.subscribe(SelectedFile, msg => this.selectFile(msg.file));\n  }\n\n  selectFile(file){\n    console.log(\"selectFile()\")\n    console.log(file);\n    window.opener.postMessage(window.location.protocol+\"//\"+window.location.hostname+file.webdavuri, \"*\");\n      //+\" \"+window.location.protocol+\"//\"+window.location.hostname+file.publicwebdavuri, \"*\");\n    window.close();\n  }\n\n}\n","import environment from '../environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/**\n * created by Tomas Kulhanek on 4/11/17.\n */\n\nimport {HttpClient} from 'aurelia-http-client';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {SelectedFile} from '../filepicker/messages';\nimport {bindable} from 'aurelia-framework';\nimport {Filepanel} from '../filepicker/filepanel';\n\nexport class Uploaddirpanel extends Filepanel {\n  static inject = [EventAggregator, HttpClient];\n  @bindable panelid;\n\n  constructor(ea, httpclient) {\n    super(ea,httpclient)\n  }\n\n  selectFile(file){\n    console.log(\"filepanel tableid:\"+this.panelid);\n    if (file.size.endsWith && file.size.endsWith('DIR')) this.changefolder(file.name);\n  }\n\n\n  selectThisDir() {\n    console.log(\"selected:\"+this.path);\n    let myfile= {};\n    myfile.name = this.path;\n    this.client.get(this.getpublicwebdavurl)\n      .then(data => {\n        if (data.response) {\n          let mypath2=JSON.parse(data.response);\n          let mypath = mypath2.signed_url;\n          mypath+= this.path.startsWith('/')?this.path.slice(1):this.path;\n          let mydir = {};\n          mydir.webdavuri = mypath;\n          this.ea.publish(new SelectedFile(mydir, this.panelid));\n        }\n      });\n  }\n}\n","\nexport class App {\n\n}\n","/**\n * Created by Tomas Kulhanek on 1/16/17.\n */\nimport {Modulecontrol} from \"./modulecontrol\";\nimport {bindable} from 'aurelia-framework';\n\nexport class Ccp4control extends Modulecontrol{\n//  @bindable classin = \"w3-sand\";\n  @bindable classin = \"w3-card-4 w3-sand w3-padding w3-margin w3-round\";\n  constructor(){\n    super();\n    this.posturl=\"/metadataservice/sbservice/ccp4suite\";\n    this.url=\"/metadataservice/sbservice/ccp4suite\";\n  }\n\n\n}\n","import environment from '../environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/**\n * Created by Tomas Kulhanek on 1/16/17.\n */\n\nimport {HttpClient} from 'aurelia-http-client';\n//import {bindable} from 'aurelia-framework';\n\n\nexport class Modulecontrol{\n//  @bindable classin = \"w3-card-4 w3-sand w3-padding w3-margin w3-round\";\n  constructor () {\n    this.httpclient=new HttpClient();\n    this.url=window.location.href;\n    this.enabled=false;\n    this.httpclient.configure(config=> {\n      config.withHeader('Accept', 'application/json');\n      config.withHeader('Content-Type', 'application/json');\n    });\n\n  }\n\n  attached(){\n    //console.log(\"attached() url:\"+this.url);\n    this.httpclient.get(this.url)\n      .then(response => this.okcallback(response))\n      .catch(error => this.failcallback(error))\n  }\n\n  okcallback(response){\n    //console.log(\"okcallback()\");\n    var res= JSON.parse(response.response);\n    //console.log(res.enabled);\n    this.enabled= res.enabled;\n  }\n\n  failcallback(error){\n    this.enabled=false;\n    console.log('Sorry, error when connecting backend web service at '+this.url+' error:'+error.response+\" status:\"+error.statusText);\n  }\n\n  enable(){\n    this.httpclient.post(this.url)\n      .then(response => this.okcallback(response))\n      .catch(error => this.failcallback(error))\n  }\n\n}\n","/**\n * Created by Tomas Kulhanek on 1/16/17.\n */\n\nexport class Modulesetting {\n\n}\n","/**\n * Created by Tomas Kulhanek on 1/16/17.\n */\nimport {Modulecontrol} from \"./modulecontrol\";\nimport {bindable} from 'aurelia-framework';\n\nexport class Scipioncontrol extends Modulecontrol{\n  @bindable classin = \"w3-card-4 w3-sand w3-padding w3-margin w3-round\";\n  constructor(){\n   super();\n   this.url=\"/metadataservice/sbservice/scipion\";\n   this.posturl=\"/metadataservice/sbservice/scipion\";\n }\n\n}\n","/**\n * Created by Tomas Kulhanek on 1/16/17.\n */\nimport {Modulecontrol} from \"./modulecontrol\";\nimport {bindable} from 'aurelia-framework';\n\nexport class Virtuosocontrol extends Modulecontrol {\n//  @bindable classin = \"w3-sand\";\n  @bindable classin = \"w3-card-4 w3-sand w3-padding w3-margin w3-round\";\n  constructor(){\n    super();\n    this.url=\"/metadataservice/sbservice/virtuoso\";\n  }\n\n\n}\n","/**\n * Created by Tomas Kulhanek on 1/6/17.\n */\nimport {HttpClient} from 'aurelia-http-client';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {SettingsSubmitted} from './messages';\n\n//let client = new HttpClient();\n\n/**\n * Aliastable component gets the currently registered aliases for file providers\n * and shows them in a table\n */\nexport class Aliastable {\n  static inject = [EventAggregator,HttpClient];\n\n  constructor(ea,httpclient){\n    this.serviceurl = \"/metadataservice/files\";\n    ea.subscribe(SettingsSubmitted, msg => this.submitSettings(msg.settings) );\n    this.client=httpclient;\n    this.providers=[{alias:\"Loading available providers ...\",temporary:true}];\n    this.client.configure(config=> {\n      config.withHeader('Accept', 'application/json');\n      config.withHeader('Content-Type', 'application/json');\n    });\n  }\n\n  attached() {\n    //gets the status of the b2drop connection\n    this.client.get(this.serviceurl)\n      .then(data => {\n        //console.log(\"data response\");\n        //console.log(data);\n        if (data.response) {\n          this.providers = JSON.parse(data.response);\n        }\n      })\n      .catch(error =>{\n        console.log(\"aliastable.attached() error:\")\n        console.log(error);\n          //handle 403 unauthorized\n          if (error.statusCode == 403) {\n            //try to login\n            console.log(\"redirecting\");\n            window.location = \"/login?next=\" + window.location.pathname;\n            //window.location =\n          } else\n        alert('Sorry, error when connecting backend web service at '+this.serviceurl+' error:'+error.response+\" status:\"+error.statusText)\n      });\n  }\n\n  submitSettings(settings) {\n     this.providers = settings;\n  }\n\n  removeProvider(settings){\n    //console.log(\"removeProvider() \"+alias);\n    if (!confirm('Do you really want to delete the provider with alias \"'+settings.alias+'\" ?'))\n      return;\n    this.client.delete(this.serviceurl+\"/\"+settings.alias)\n      .then(data =>{\n        //console.log(\"data response\");\n        //console.log(data);\n        if (data.response) {\n          this.providers = JSON.parse(data.response);\n        }\n      })\n      .catch(error =>{\n        console.log(error);\n\n        alert('Sorry. Settings not deleted at '+this.serviceurl+' error:'+error.response+\" status:\"+error.statusText)\n      });\n  }\n\n}\n","\nexport class App {\n  constructor(){\n    let location = window.location.protocol;\n    this.islocalhost= location.startsWith('http:');\n    // wait for assignement this.genericcontrol from children\n\n  }\n\n}\n","/**\n * Created by Tomas Kulhanek on 5/24/17.\n */\n\nexport class Clouddeployment {\n}\n","/**\n * Created by Tomas Kulhanek on 1/10/17.\n */\n/**\n * Created by Tomas Kulhanek on 1/5/17.\n */\n\nimport {UrlUtils} from './urlutils';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {SettingsSelected} from './messages';\nimport 'dropbox';\n\n//let client = new HttpClient();\n\nexport class DropboxControl {\n\n  static inject = [EventAggregator, UrlUtils];\n\n  constructor(ea,urlutils){\n    //this.dbx = dropbox;\n    // Parses the url and gets the access token if it is in the urls hash\n    this.ea= ea;\n    this.urlutils = urlutils;\n    this.accesstoken=this.urlutils.parseQueryString(window.location.hash).access_token;\n    this.isAuthenticated = !!this.accesstoken;\n    //console.log('dropboxcontrol() accesstoken:'+this.accesstoken);\n\n    //instantiate dropboxclient - needed for getting URL to redirect\n    this.CLIENTIDENC = \"o\\\"csb%'{{{ze'ya\";\n    try {\n      var Dropbox = require(\"dropbox\");\n      //console.log(mdb)\n      var dbx = new Dropbox({\n        clientId: this.CLIENTIDENC.split('').map(function (c) {\n          return String.fromCharCode(23 ^ c.charCodeAt());\n        }).join(\"\")\n      });\n      var currentUrl = window.location.href;\n      //console.log('dropboxcontrol() current url:' + currentUrl);\n      this.authurl = dbx.getAuthenticationUrl(currentUrl);\n      //console.log('dropboxcontrol() auth url:' + this.authurl);\n      //console.log(this.dropBoxAuthUrl);\n    } catch(e){\n      console.log(\"exception:\")\n      console.log(e)\n    }\n\n    this.id=\"Dropbox\";\n\n\n  }\n  \n  initialize(){\n    if (this.isAuthenticated) {\n      var settings = {};\n      settings.type=this.id;\n      //settings.alias = this.alias;\n      settings.securetoken = this.accesstoken;\n      //else settings.username = this.username;\n      //if (this.password) settings.securetoken = this.password;\n      this.ea.publish(new SettingsSelected(settings));\n    }\n  }\n\n}\n","/**\n * Created by Tomas Kulhanek on 1/5/17.\n */\nimport {HttpClient,json} from 'aurelia-fetch-client';\nimport {computedFrom} from 'aurelia-framework';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {SettingsSubmitted} from './messages';\nimport {DropboxControl} from './dropboxcontrol';\nimport {SettingsSelected} from './messages';\n\nexport class Genericcontrol {\n\n  static inject = [EventAggregator, HttpClient,DropboxControl];\n\n\n  constructor(ea,httpclient,dropboxcontrol) {\n    this.heading=\"File Provider\";\n    this.ea= ea;\n    this.dropboxcontrol=dropboxcontrol;\n    this.editing=true;\n    this.providerspath = \"providers\";\n    this.filespath = \"files\";\n    this.knowtoken=false;\n    this.dropboxauthurl = \"\";\n    this.providers = [];\n    this.selectedProvider=\"\";\n    //console.log('genericcontrol()');\n    this.client=httpclient;\n    /*this.client.configure(config=> {\n      config.withHeader('Accept', 'application/json');\n      config.withHeader('Content-Type', 'application/json');\n    });*/\n    this.ea.subscribe(SettingsSelected, msg => this.selectSettings(msg.settings) )\n    this.myHeaders = new Headers();\n    this.myHeaders.append('Accept', 'application/json');\n    this.myHeaders.append('Content-Type', 'application/json');\n\n  }\n\n  @computedFrom('selectedProvider')\n  get selectedDropbox() {\n    return this.selectedProvider==this.dropboxcontrol.id;\n  }\n\n  @computedFrom('selectedProvider')\n  get selectedB2Drop() {\n    return this.selectedProvider=='B2Drop';\n  }\n\n  @computedFrom('selectedProvider')\n  get selectedFileSystem() {\n    return this.selectedProvider=='FileSystem';\n  }\n  @computedFrom('selectedProvider')\n  get selectedWebDav() {\n    return this.selectedProvider=='WebDav';\n  }\n\n  get knowntoken(){\n    if (this.knownSecureToken) return this.knownSecureToken.checked;\n  }\n\n  clear(){\n    this.selectedProvider=\"\";\n    this.username=\"\";\n    this.securetoken=\"\";\n    this.filesystempath=\"\";\n    this.alias=\"\";\n    this.accessurl=\"\";\n  }\n\n  attached() {\n    //console.log('genericcontrol.attached()');\n    //console.log(\"dialogstate:\"+this.dialogstate);\n    //attach parent with the instance\n    //this.bindingContext.genericcontrol = this;\n    //gets the status of the b2drop connection\n    this.dropboxauthurl = this.dropboxcontrol.authurl;\n    this.client.fetch(\"/metadataservice/\"+this.providerspath,{headers:this.myHeaders})\n      .then(response => response.json())\n      .then(data=> {\n        console.log(\"data response\");\n        console.log(data);\n        if (data) {\n          this.providers = data;\n        }\n      }).catch(error => {\n      //handle 403 unauthorized\n      if (error.statusCode == 403) {\n        //try to login\n        console.log(\"redirecting\");\n        window.location = \"/login?next=\" + window.location.pathname;\n        //window.location =\n      } else {\n        console.log('Error');\n        console.log(error);\n        //alert('Sorry, response: ' + error.statusCode + ':' + error.statusText + ' when trying to get: ' + this.serviceurl);\n      }\n    });\n    this.dropboxcontrol.initialize();\n  }\n\n  addProvider() {\n     let settings = {};\n     settings.type=this.selectedProvider;\n     settings.alias = this.alias;\n     if (this.selectedDropbox) settings.securetoken = this.securetoken;\n     //TODO check validity of filesystem path on server\n     if (this.selectedFileSystem) settings.securetoken = this.filesystempath;\n     //TODO check b2drop and webdav username and password\n     if (this.selectedB2Drop) {\n       settings.securetoken = this.password;\n       settings.username = this.username;\n       //check HTTP 200\n       //this.checkWebdav(\"https://b2drop.eudat.eu/remote.php/webdav\",settings);\n     } else if (this.selectedWebDav){\n       settings.accessurl=this.accessurl;\n       settings.securetoken = this.password;\n       settings.username = this.username;\n       //this.checkWebdav(this.accessurl,settings)\n     }\n    this.submitSettings(settings)\n  }\n\n  //DO NOT WORK as CORS pre-flight OPTION is triggered by browser which results in HTTP 401 returned by b2drop\n  checkWebdav(url,settings){\n    this.client.fetch(url,{method:'HEAD'})\n      .catch(error => {\n        let myHeaders = new Headers();\n        myHeaders.append('Authorization','Basic '+btoa(settings.username+\":\"+settings.securetoken))\n        this.client.fetch(url,{method:'HEAD', headers:myHeaders})\n        .then(data => this.doneCallback(settings))\n        .catch(error => this.errorCallback(error))\n      })\n  }\n\n  submitSettings(settings) {\n    this.client.fetch(\"/metadataservice/\"+this.filespath,{\n      method: 'put',\n      body: json(settings),\n      headers:this.myHeaders\n    })\n      .then(response => response.json())\n      .then(data =>{\n        console.log(\"genericcontrol: data response:\");\n        console.log(data);\n        if (Array.isArray(data)) {\n          this.doneCallback(data);\n          //this.providers = data;\n        } else {\n\n          console.log(data);\n          if (data.ResponseStatus) alert('Sorry.'+data.ResponseStatus.ErrorCode+\"\\n\"+ data.ResponseStatus.Message+\"\\nSubmit correct username and/or password again.\");\n          else alert ('Sorry. Settings not submitted. Check all items are correct and submit again.')\n        }\n\n    })\n      .catch(error =>{\n        console.log(error);\n        alert('Sorry. Settings not submitted  at '+this.serviceurl+' error:'+error.response+\" status:\"+error.statusText)\n      });\n\n  }\n\n  doneCallback(data){\n    {\n      //console.log(\"publishing\");\n      this.ea.publish(new SettingsSubmitted(data));\n      this.clear();\n    }\n  }\n\n  errorCallback(error){\n    console.log(\"GenericControl: Error retrieved:\");\n    console.log(error);\n  }\n\n  selectSettings(settings){\n    this.selectedProvider=settings.type;\n    this.alias=settings.alias;\n    this.securetoken=settings.securetoken;\n    if (!!this.securetoken) { this.editing=false; this.knownSecureToken.checked=true; }\n  }\n\n}\n","import environment from '../environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/**\n * Created by Tomas Kulhanek on 1/9/17.\n */\n\nexport class SettingsSubmitted {\n  constructor(settings){\n    this.settings = settings;\n  }\n}\n\nexport class SettingsSelected {\n  constructor(settings){\n    this.settings = settings;\n  }\n}\n\nexport class SettingsRemoved {\n  constructor(settings){\n    this.settings = settings;\n  }\n}\n","/**\n * Created by Tomas Kulhanek on 5/28/17.\n */\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {SettingsSubmitted, SettingsSelected} from './messages';\n\n\nexport class Storageprovider {\n  static inject = [EventAggregator];\n\n  constructor(ea) {\n    this.showprovider = false;\n    ea.subscribe(SettingsSubmitted, msg => this.submitSettings(msg.settings) )\n    ea.subscribe(SettingsSelected, msg => this.selectSettings(msg.settings) )\n  }\n\n  newProvider(){\n    this.showprovider = true;\n  }\n\n  submitSettings(settings){\n    //console.log('addProvider: not yet implemented');\n    this.showprovider = false;\n    //get provider info from subcomponent\n  }\n\n  selectSettings(settings){\n    //console.log('addProvider: not yet implemented');\n    this.showprovider = true;\n    //get provider info from subcomponent\n  }\n\n}\n","/**\n * Created by Tomas Kulhanek on 1/10/17.\n */\n\nexport class UrlUtils {\n\n  constructor() {}\n\n  parseQueryString(str) {\n    var ret = Object.create(null);\n\n  if (typeof str !== 'string') {\n    return ret;\n  }\n\n  str = str.trim().replace(/^(\\?|#|&)/, '');\n\n  if (!str) {\n    return ret;\n  }\n\n  str.split('&').forEach(function (param) {\n    var parts = param.replace(/\\+/g, ' ').split('=');\n    // Firefox (pre 40) decodes `%3D` to `=`\n    // https://github.com/sindresorhus/query-string/pull/37\n    var key = parts.shift();\n    var val = parts.length > 0 ? parts.join('=') : undefined;\n\n    key = decodeURIComponent(key);\n\n    // missing `=` should be `null`:\n    // http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n    val = val === undefined ? null : decodeURIComponent(val);\n\n    if (ret[key] === undefined) {\n      ret[key] = val;\n    } else if (Array.isArray(ret[key])) {\n      ret[key].push(val);\n    } else {\n      ret[key] = [ret[key], val];\n    }\n  });\n\n  return ret;\n}\n\n}\n"],"sourceRoot":"../src"}