{"version":3,"sources":["app.js","environment.js","main.js","b2dropcontrol/acontrol.js","b2dropcontrol/app.js","b2dropcontrol/b2dropcontrol.js","b2dropcontrol/dropboxcontrol.js","b2dropcontrol/environment.js","b2dropcontrol/main.js","b2dropcontrol/onedrivecontrol.js","dataset/app.js","dataset/environment.js","dataset/main.js","editor/fileeditor.js","filemanager/actions.js","filemanager/app.js","filemanager/environment.js","filemanager/filepanel.js","filemanager/filesettings.js","filemanager/main.js","filemanager/viewpanel.js","filemanager2/app.js","filemanager2/environment.js","filemanager2/main.js","filemanager2/panel.js","filemanager2/viewpanelpv.js","filepicker/app.js","filepicker/environment.js","filepicker/filepanel.js","filepicker/main.js","filepicker/messages.js","pdbcomponents/analysepanel.js","pdbcomponents/dataset.js","pdbcomponents/entry-id.js","pdbcomponents/pdb-id.js","pdbcomponents/pdb-ids.js","pdbcomponents/pdbautocompletesearch.js","pdbcomponents/sasclient.js","pdbcomponents/viewpanel.js","resources/index.js","tabs/messages.js","tabs/tabs.js","virtualfoldermodules/app.js","virtualfoldermodules/ccp4control.js","virtualfoldermodules/main.js","virtualfoldermodules/modulecontrol.js","virtualfoldermodules/modulesetting.js","virtualfoldermodules/scipioncontrol.js","virtualfoldermodules/virtuosocontrol.js","virtualfoldersetting/aliastable.js","virtualfoldersetting/app.js","virtualfoldersetting/dropboxcontrol.js","virtualfoldersetting/genericcontrol.js","virtualfoldersetting/main.js","virtualfoldersetting/messages.js","virtualfoldersetting/urlutils.js"],"names":["App","message","debug","testing","configure","Promise","config","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","client","AControl","heading","username","usertoken","status","dialogstate","dialogstateconnected","dialogstateconnecting","dialogstateentry","servicecontext","showbutton","withHeader","updatestate","state","attached","console","log","get","data","response","myresponse","JSON","parse","connected","reconnect","addservice","servicename","postdata","securetoken","postdatajson","stringify","post","okcallback","failcallback","parseQueryString","str","ret","Object","create","trim","replace","split","forEach","param","parts","key","shift","val","length","join","undefined","decodeURIComponent","Array","isArray","push","B2dropcontrol","output","Dropboxcontrol","CLIENTID","showdropboxbutton","dropBoxAuthUrl","Dropbox","isAuthenticated","getAccessTokenFromUrl","dbx","clientId","currentUrl","window","location","href","getAuthenticationUrl","updatedropboxstate","hash","access_token","basicConfiguration","Onedrivecontrol","clientid","element","httpclient","pdbdataset","pdbdataitem","pdblinkset","submitdisabled2","date","Date","name","getFullYear","getMonth","getDate","additem","unshift","removeitem","itemtodelete","filter","item","submit","put","catch","error","alert","serviceurl","statusText","inject","Element","CodeMirror","Fileeditor","el","ea","subscribe","selectFile","msg","file","senderid","editor","querySelector","codemirror","fromTextArea","cmTextarea","lineNumbers","mode","theme","webdavuri","setValue","Actions","help","menu","view","edit","viewpanel1","viewpanel2","showhelp","fileurl","myKeypressCallback","keypressInput","bind","activate","addEventListener","deactivate","removeEventListener","e","doAction","fileitem","panelid","childview2","viewfile","childview","close1","close2","FilepanelCustomElement","defaultBindingMode","oneTime","on","files","filescount","path","dynatable","created","owningView","myview","parent","populateFiles","$","tableid","dataset","records","features","paginate","search","recordCount","perPageSelect","pushState","a","b","controller","viewModel","children","innerText","endsWith","changefolder","firstChild","fileindex","map","indexOf","showdialog","statusCode","dateTimeReviver","value","exec","parseInt","toLocaleDateString","cdup","sepIndex","lastIndexOf","substring","cddown","subdir","folder","lock","d","settings","originalRecords","process","refresh","dataresponse","size","index","arr","alias","attributes","FileSettings","Viewpanel","bindingContext","viewerdom","options","width","height","antialias","quality","viewer","pv","Viewer","overrideContext","viewid","loadfromurl","pdb","structure","io","cartoon","color","ssSuccession","centerOn","loadlocalpdbfile","loadpdbfile","url","pdbentry","loadfromredo","pdbentry2","closeviewer","Panel","selectTab","tabid","uid","valueOf","ids","selectedTab","paneltabs","id","label","selectedAnalyse","selectedView","selectedVisual","selectedDataset","selectedList","startsWith","publish","Viewpanelpv","VisualizeFile","opener","postMessage","protocol","hostname","close","Filepanel","lastpath","SelectedFile","EditFile","Analysepanel","pdbids","pdbid","insertAdjacentHTML","angular","bootstrap","pdbidsChanged","newValue","oldValue","setAttribute","pdbidChanged","Dataset","EntryIdCustomAttribute","valueChanged","PdbIdCustomAttribute","PdbIdsCustomAttribute","tagName","getAttribute","pdbidsjson","Pdbautocompletesearch","searchbox","sasclient","searchboxChanged","newVal","oldVal","Sasclient","resultBoxAlign","redirectOnClick","searchUrl","fields","group","groupLimit","sort","searchParams","term","grouped","category","groups","searchMore","sourceurl","sourceformat","pdblitemol","replacepdblitemol","loadpdb","pdbviewer","parentnode","removeChild","SelectedTab","Tabs","opentab","activeid","Ccp4control","posturl","Modulecontrol","enabled","res","enable","Modulesetting","Scipioncontrol","Virtuosocontrol","Aliastable","submitSettings","providers","temporary","removeProvider","confirm","delete","showprovider","selectSettings","newProvider","DropboxControl","urlutils","accesstoken","CLIENTIDENC","c","String","fromCharCode","charCodeAt","authurl","initialize","type","Genericcontrol","dropboxcontrol","editing","knowtoken","dropboxauthurl","selectedProvider","clear","filesystempath","accessurl","addProvider","selectedDropbox","selectedFileSystem","selectedB2Drop","password","selectedWebDav","knownSecureToken","checked","SettingsSubmitted","SettingsSelected","SettingsRemoved","UrlUtils"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n  constructor() {\n    this.message = 'Hello World!';\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/**\n * Created by Tomas Kulhanek on 12/8/16.\n */\nimport {HttpClient} from 'aurelia-http-client';\n\nlet client = new HttpClient();\n\nexport class AControl {\n\n    constructor() {\n        this.heading = \"connector\";\n        this.username = \"\";\n        this.usertoken = \"\";\n        this.status = \"unknown\";\n        this.dialogstate = 1;\n        this.dialogstateconnected, this.dialogstateconnecting = false;\n        this.dialogstateentry = true;\n        this.servicecontext=\"\";\n        this.showbutton = false;\n        client.configure(config=> {\n            config.withHeader('Accept', 'application/json');\n            config.withHeader('Content-Type', 'application/json');\n        });\n    }\n\n    updatestate(state) {\n        this.dialogstate = state;\n        this.dialogstateconnected = state == 3;\n        this.dialogstateconnecting = state == 2;\n        this.dialogstateentry = state == 1;\n    }\n\n    attached() {\n      console.log(\"Acontrol.attached()\");\n      console.log(\"dialogstate:\"+this.dialogstate);\n        //gets the status of the b2drop connection\n        client.get(\"/metadataservice/\"+this.servicecontext)\n            .then(data => {\n                this.status=\"disconnected\";\n                this.updatestate(1);\n                //console.log(\"data response\");\n                //console.log(data);\n                if (data.response) {\n                    let myresponse = JSON.parse(data.response);\n                    if (myresponse.connected) {\n                        this.status = \"OK\";\n                        this.updatestate(3);\n                    }\n                }\n            });\n    }\n\n    reconnect() {\n        //triggers to show dialog\n        this.updatestate(1);\n    }\n\n    /*    addb2drop(){ return this.addserviceb2dropconnector();}//\",this.b2dropOKCallback,this.b2dropFailCallback)}\n\n     adddropbox(){ return this.addservicedropboxconnector();}//\",this.dropboxOKCallback,this.dropboxFailCallback)}\n     */\n    addservice(servicename) { //post credentials to connect to b2dropconnector rest service\n        this.updatestate(2);\n        let postdata = {username: this.username, securetoken: this.usertoken};\n        //console.log(postdata);\n        let postdatajson = JSON.stringify(postdata);\n        //console.log(postdatajson);\n\n        client.post(\"/metadataservice/\" + servicename, postdatajson)\n            .then(data => {\n                //console.log(data.response);\n                let myresponse = JSON.parse(data.response);\n                if (myresponse.connected) {\n                    okcallback();\n                }\n                else {\n                    failcallback(myresponse);\n                }\n            });\n    }\n\n    failcallback() {\n        console.log('acontrol.okcallback() should be overridden')\n        //empty, implemented by child\n    }\n\n    okcallback() {\n        console.log('acontrol.okcallback() should be overridden')\n        //empty, implemented by child\n    }\n\n    parseQueryString(str) {\n        var ret = Object.create(null);\n\n        if (typeof str !== 'string') {\n            return ret;\n        }\n\n        str = str.trim().replace(/^(\\?|#|&)/, '');\n\n        if (!str) {\n            return ret;\n        }\n\n        str.split('&').forEach(function (param) {\n            var parts = param.replace(/\\+/g, ' ').split('=');\n            // Firefox (pre 40) decodes `%3D` to `=`\n            // https://github.com/sindresorhus/query-string/pull/37\n            var key = parts.shift();\n            var val = parts.length > 0 ? parts.join('=') : undefined;\n\n            key = decodeURIComponent(key);\n\n            // missing `=` should be `null`:\n            // http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n            val = val === undefined ? null : decodeURIComponent(val);\n\n            if (ret[key] === undefined) {\n                ret[key] = val;\n            } else if (Array.isArray(ret[key])) {\n                ret[key].push(val);\n            } else {\n                ret[key] = [ret[key], val];\n            }\n        });\n\n        return ret;\n    }\n}\n\n","/**\n * Created by vagrant on 9/6/16.\n */\n\nexport class App {\n\n}\n","/**\n * Created by vagrant on 9/6/16.\n */\nimport {HttpClient} from 'aurelia-http-client';\nimport {AControl} from './acontrol';\n\nlet client = new HttpClient();\n\nexport class B2dropcontrol extends AControl{\n\n    constructor (){\n        super();\n        this.heading=\"B2DROP connector\";\n        this.servicecontext = \"b2dropconnector\";\n    }\n\n    failcallback(myresponse) {\n        this.updatestate(1);\n        this.status = \"fail:\";\n        if (myresponse.output) {\n            this.status += myresponse.output;\n        }\n    }\n\n    okcallback() {\n        this.status = \"OK\";\n        this.updatestate(3);\n    }\n\n\n}\n","/**\n * Created by Tomas Kulhanek on 9/6/16.\n */\n\nimport {AControl} from './acontrol';\n\nexport class Dropboxcontrol extends AControl {\n\n    constructor() {\n       super();\n        this.heading=\"DROPBOX connector\";\n        this.CLIENTID = \"x5tdu20lllmr0nv\";\n        this.showdropboxbutton = false;\n        this.servicecontext = \"dropboxconnector\";\n        this.dropBoxAuthUrl = \"\";\n    }\n\n    attached() {\n        console.log('dropbox');\n        console.log(Dropbox);\n        if (this.isAuthenticated()) {\n            this.showdropboxbutton = false;\n            this.usertoken = this.getAccessTokenFromUrl();\n            this.addservice('dropboxconnector');\n        } else {\n          console.log(\"dropboxcontrol.attached()\");\n          console.log(this.dialogstateentry);\n          console.log(this.dialogstate);\n            console.log(this.CLIENTID);\n            this.showdropboxbutton = true;\n            console.log(this.showdropboxbutton);\n\n            var dbx = new Dropbox({clientId: this.CLIENTID});\n            console.log(dbx);\n            var currentUrl = window.location.href;\n            console.log('current url:' + currentUrl);\n            this.dropBoxAuthUrl = dbx.getAuthenticationUrl(currentUrl);\n            console.log(this.dropBoxAuthUrl);\n        }\n        super.attached();\n    }\n\n    failcallback(myresponse) {\n        this.updatedropboxstate(1);\n        this.status = \"fail:\";\n        if (myresponse.output) {\n            this.status += myresponse.output;\n        }\n    }\n\n    okcallback() {\n        this.status = \"OK\";\n        this.updatestate(3);\n    }\n\n    // Parses the url and gets the access token if it is in the urls hash\n    getAccessTokenFromUrl() {\n        return this.parseQueryString(window.location.hash).access_token;\n    }\n\n    // If the user was just redirected from authenticating, the urls hash will\n    // contain the access token.\n    isAuthenticated() {\n        return !!this.getAccessTokenFromUrl();\n    }\n}\n","export default {\n  debug: true,\n  testing: false\n};\n","import environment from './environment';\n\n\nexport function configure(aurelia) {\n  aurelia.use\n    .basicConfiguration();\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/**\n * Created by Tomas Kulhanek on 12/8/16.\n */\nimport {HttpClient} from 'aurelia-http-client';\nimport {AControl} from './acontrol';\nlet client = new HttpClient();\n\nexport class Onedrivecontrol extends AControl {\n\n  constructor() {\n    super();\n    this.heading = \"ONEDRIVE connector\";\n    this.clientid = \"xUfizTokQv6mAiZ9sgzQnm0\";\n    this.servicecontext= \"onedriveconnector\";\n  }\n}\n","/**\n * Created by root on 3/10/17.\n */\n/**\n * Created by vagrant on 2/21/17.\n */\n/*\n <script type=\"text/javascript\" src=\"/scripts/autocomplete/build/inline.bundle.js\"></script>\n <script type=\"text/javascript\" src=\"/scripts/autocomplete/build/vendor.bundle.js\"></script>\n <script type=\"text/javascript\" src=\"/scripts/autocomplete/build/main.bundle.js\"></script>\n */\n\n//import \"autocomplete\";\n\n//import \"autocomplete\";\nimport {HttpClient} from \"aurelia-http-client\";\nimport {computedFrom} from 'aurelia-framework';\n\n//Model view controller\n//Model view viewmodel\n\nexport class App {\n  static inject = [Element,HttpClient];\n\n  constructor (element,httpclient) {\n    this.element = element;\n    this.pdbdataset = [];\n    this.pdbdataitem = \"\";\n    this.pdblinkset = [];\n    this.pdbdataitem = \"\";\n    this.submitdisabled2 = true;\n    let date = new Date();\n    this.name=\"dataset-\"+date.getFullYear()+\".\"+(date.getMonth()+1)+\".\"+date.getDate();\n    this.client = httpclient;\n    this.client.configure(config=> {\n      config.withHeader('Accept', 'application/json');\n    config.withHeader('Content-Type', 'application/json');\n  });\n\n  }\n\n  //@computedFrom('submitdisabled2')\n  //TODO check,test to trigger only when pdbdataset is changed\n  get canSubmit() {\n    //console.log(\"disabled? \"+this.pdbdataset.length);\n    if (this.pdbdataset.length>0)\n      return true;\n    else\n      return false;\n\n  }\n\n  /*bootstrapPdbeAutocomplete(){\n   console.log(\"pdb-autocomplete bootstrap()\");\n   var event;\n   if (typeof MouseEvent == 'function') {\n   event = new MouseEvent('PDBeWebComponentsReady', { 'view': window, 'bubbles': true, 'cancelable': true });\n   } else if (typeof document.createEvent == 'function') {\n   event = document.createEvent('MouseEvents');\n   event.initEvent('PDBeWebComponentsReady', true, true );\n   }\n   //Dispatch\n   document.dispatchEvent(event);\n   }\n\n   attached() {\n   console.log(\"Dataset attached(), calling bootstrap.\")\n   var PdbeAutocompleteSearchConfig = {\n   resultBoxAlign: 'left',\n   redirectOnClick: false,\n   searchUrl: '//www.ebi.ac.uk/pdbe/search/pdb-autocomplete/select',\n   fields: 'value,num_pdb_entries,var_name',\n   group: 'group=true&group.field=category',\n   groupLimit: '25',\n   sort: 'category+asc,num_pdb_entries+desc',\n   searchParams: 'rows=20000&json.nl=map&wt=json'\n   }\n   document.addEventListener('PDBe.autocomplete.click', function(e){ console.log(e.eventData) })\n\n   //this.bootstrapPdbeAutocomplete();\n   }\n   */\n  additem(){\n    console.log(\"additem()\");\n    this.pdbdataset.unshift(this.pdbdataitem);\n\n    //this.canSubmit = this.pdbdataset.length>0?true:false;\n  }\n\n  removeitem(itemtodelete){\n    this.pdbdataset = this.pdbdataset.filter(item => item!== itemtodelete);\n  }\n\n  submit(){\n    this.client.put(\"/metadataservice/dataset\",JSON.stringify(this.pdbdataset))\n      .then(data =>{\n      console.log(\"data response\");\n    console.log(data);9\n  })\n  .catch(error =>{\n      console.log(error);\n    alert('Sorry. Dataset not submitted  at '+this.serviceurl+' error:'+error.response+\" status:\"+error.statusText)\n  });\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n/**\n * Created by root on 3/10/17.\n */\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n/**\n * Created by root on 3/10/17.\n */\n","/**\n * Created by Tomas Kulhanek on 2/17/17.\n */\n\nimport * as CodeMirror from \"codemirror\";\nimport \"codemirror/mode/clike/clike\";\nimport \"codemirror/mode/htmlmixed/htmlmixed\";\nimport \"codemirror/mode/javascript/javascript\";\n\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {HttpClient} from 'aurelia-http-client';\nimport {EditFile} from '../filepicker/messages';\n\n//import $ from 'jquery';\n\n\nexport class Fileeditor {\n  static inject = [Element,EventAggregator, HttpClient];\n  constructor(el,ea,httpclient) {\n    this.el = el;\n    this.ea = ea;\n    this.httpclient = httpclient;\n    this.ea.subscribe(EditFile, msg => this.selectFile(msg.file,msg.senderid));\n\n  }\n\n  attached() {\n    var editor = this.el.querySelector(\".Codemirror\");\n    //prevent blured render if not shown before\n    if (editor==null) this.codemirror = CodeMirror.fromTextArea(this.cmTextarea, {\n      lineNumbers: true,\n      mode: \"text/x-less\",\n      theme: \"eclipse\"\n    });\n  }\n\n  selectFile(file,senderid) {\n\n    this.httpclient.get(file.webdavuri).then(\n      data =>{\n        console.log(\"obtained data:\");\n        console.log(data);\n        this.codemirror.setValue(data.response);\n\n      }\n    ).catch(error => {\n        alert('Error retrieving content from '+file.webdavuri);\n      });\n\n  }\n}\n","/**\n * Created by vagrant on 9/6/16.\n */\nimport {HttpClient} from 'aurelia-http-client';\n\nlet client = new HttpClient();\n\nexport class Actions {\n    constructor() {\n        client.configure(config=> {\n            config.withHeader('Accept', 'application/json');\n            config.withHeader('Content-Type', 'application/json');\n        });\n    }\n\n    attached() {\n    }\n\n    help(){\n    }\n\n    menu(){\n    }\n\n    view(){\n    }\n\n    edit(){\n    }\n\n\n}\n\n","/**\n * Created by vagrant on 9/6/16.\n */\n\nimport {HttpClient} from 'aurelia-http-client';\n\n\nexport class App {\n\n    constructor() {\n        this.heading = \"File manager\";\n        this.viewpanel1 = false;\n        this.viewpanel2 = false;\n        this.showhelp = false;\n        this.fileurl = \"test1\";\n        this.myKeypressCallback = this.keypressInput.bind(this);\n\n    }\n\n    activate(){\n        window.addEventListener('keypress', this.myKeypressCallback, false);\n    }\n\n    deactivate() {\n        window.removeEventListener('keypress', this.myKeypressCallback);\n    }\n\n    // This function is called by the aliased method\n    keypressInput(e) {\n        console.log('keypressed');\n        if (e.key=='F1') this.help();\n        console.log(e);\n    }\n\n    doAction(fileitem,panelid) {\n        this.fileurl = fileitem.webdavuri;\n      console.log('app.doaction()');\n      console.log(this.fileurl);\n        if (panelid==\"filepanel1\") {\n            //hide filepanel2, show file\n            this.viewpanel2 = true;//!this.viewpanel2; //switch\n            if (this.childview2)\n            this.childview2.viewfile(fileitem.webdavuri);\n        } else {\n            this.viewpanel1 = true;//!this.viewpanel1; //switch\n            if (this.childview)\n                this.childview.viewfile(fileitem.webdavuri);\n\n        }\n    }\n    close1(){\n      this.viewpanel1=false;\n    }\n    close2(){\n      this.viewpanel2=false;\n    }\n    help(){\n        this.showhelp=!this.showhelp;\n    }\n}\n","export default {\n  debug: true,\n  testing: false\n};\n","/**\n * Created by vagrant on 9/28/16.\n */\n\nimport {HttpClient} from 'aurelia-http-client';\nimport {bindable, bindingMode, decorators} from 'aurelia-framework';\n\nlet client = new HttpClient();\n\n//TODO refactor to use Observer pattern and Dependency injection\n\nexport const FilepanelCustomElement = decorators (\n    bindable({ name: 'tableid', defaultBindingMode: bindingMode.oneTime }),\n    bindable('allowDestruction')\n     ).on(class {\n\n/*export class FilePanel {*/\n    constructor() {\n        this.files = [];\n        this.filescount = this.files.length;\n        this.path= \"\";\n        this.dynatable = {};\n        this.serviceurl = \"/metadataservice/files\";\n        //not yet accessible here console.log(\"file panel constructed:\" + this.tableid);\n        //http to accept json\n        client.configure(config=>{\n            config.withHeader('Accept','application/json');\n            config.withHeader('Content-Type','application/json');\n        });\n    }\n\n    created(owningView,myview) {\n        this.parent = owningView;//.controller.viewModel;\n//        console.log('parent');\n//        console.log(this.parent);\n    }\n\n    //triggered after this object is placed to DOM\n    attached() {\n        //console.log(\"file panel attached:\" + this.tableid);\n\n        //read the directory infos\n        client.get(this.serviceurl)\n            .then(data => {\n                if (data.response) {\n                    this.populateFiles(data.response);\n\n                    this.dynatable = $('#'+this.tableid).dynatable({\n                        dataset: {\n                            records: this.files\n                        },\n                        features: {\n                            paginate: false,\n                            search: false,\n                            recordCount: false,\n                            perPageSelect: false,\n                            pushState:false\n\n                        }\n                    });\n                    //adds click listener to the table items\n                    let a = this;\n                    let b = this.parent.controller.viewModel;\n\n//                    console.log('b');\n//                    console.log(b);\n                    this.dynatable.on('click', 'tr', function () {\n                        if (this.children[1].innerText.endsWith('DIR')) //if directory in second column\n                            a.changefolder(this.firstChild.innerText);\n                        else {\n                            var fileitem = this.firstChild.innerText;\n                            var fileindex = a.files.map(function(e) {return e.name;}).indexOf(fileitem);\n                            console.log('fileitem');\n                            console.log(fileitem);\n                            console.log(fileindex);\n                            b.doAction(a.files[fileindex], a.tableid);//do some file related stuff\n                        }\n                    });\n                }\n            }).catch(error => {\n\n                console.log('Error');\n                console.log(error);\n                this.status=\"unavailable\";\n                this.showdialog=false;\n                alert('Sorry, response: '+error.statusCode+':'+error.statusText+' when trying to get: '+this.serviceurl);\n            });\n    }\n\n    //parse .NET encoded Date in JSON\n    dateTimeReviver(key, value) {\n        var a;\n        if (typeof value === 'string') {\n            a = /\\/Date\\(([\\d\\+]*)\\)\\//.exec(value);\n            if (a) {\n                return new Date(parseInt(a[1])).toLocaleDateString('en-GB');\n            }\n        }\n        return value;\n    }\n\n    //removes last subdirectory\n    cdup(){\n        let sepIndex= this.path.lastIndexOf('/');\n        this.path = this.path.substring(0,sepIndex);\n    }\n\n    //adds subdirectory to the path\n    cddown(subdir) {\n        this.path+='/'+subdir;\n    }\n\n\n    //change folder, reads the folder content and updates the table structure\n    changefolder(folder){\n        if (!this.lock) {\n            this.lock = true;\n            if (folder) {\n                if (folder == '..') this.cdup();\n                else this.cddown(folder);\n            }\n\n          client.get(this.serviceurl + this.path)\n                .then(data => {\n                    if (data.response) {\n                        this.populateFiles(data.response);\n                        //update files in table view\n                        var d = this.dynatable.data('dynatable');\n                        d.settings.dataset.originalRecords = this.files;\n                        d.process();\n                        let a = this;\n                    }\n                    this.lock = false;\n                }).catch(error => {\n                console.log('Error');\n                console.log(error);\n                alert('Sorry, response: '+error.statusCode+':'+error.statusText+' when trying to get: '+this.serviceurl+this.path);\n                this.lock = false;\n            });\n        } //else doubleclick when the previous operation didn't finished\n    }\n\n    //refresh the file content\n    refresh() {\n        this.changefolder(); //changefolder with empty folder - just refresh\n    }\n\n    //parses response and fills file array with customization (DIRS instead of size number)\n    populateFiles(dataresponse){\n        this.files = JSON.parse(dataresponse,this.dateTimeReviver);//populate window list\n        this.filescount =  this.files.length;\n        if (this.path.length>0) {//non root path\n            this.files.unshift({name: \"..\", size: \"UP DIR\",date:\"\"}); //up dir item\n        }\n        this.files.forEach (function (item,index,arr){\n          if(!arr[index].name && arr[index].alias) {\n            arr[index].name=arr[index].alias;\n            arr[index].attributes = 16;\n            arr[index].date=\"\";\n          }\n          if (arr[index].attributes & 16) arr[index].size=\"DIR\"});\n        console.log(this.files);\n    }\n\n    doAction(fileitem) {\n      //console.log(\"filepane.doaction()\");\n        //console.log(fileitem.children);\n        this.parent.doAction(fileitem);\n    }\n\n}\n);\n\n\n\n","/**\n * Created by vagrant on 9/6/16.\n */\n\nimport {HttpClient} from 'aurelia-http-client';\nimport {bindable, bindingMode} from 'aurelia-framework';\n\n//import $ from 'doc/jquery-1.7.2.min';\n//import dynatable from 'doc/jquery.dynatable';\n\nexport class FileSettings {\n    constructor() {\n        this.heading = \"File View\";\n    }\n\n}\n\n","import environment from './environment';\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration();\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/**\n * Created by Tomas Kulhanek on 11/29/16.\n */\n\nimport {HttpClient} from 'aurelia-http-client';\n\nlet client = new HttpClient();\n\nexport class  Viewpanel {\n    constructor() {\n      this.fileurl=\"\";\n    }\n\n    attached(){\n        console.log('viewpanel.attached()')\n\n      if (this.bindingContext.viewpanel2) {\n        this.bindingContext.childview2 = this;\n        this.viewerdom = $('.fileviewer')[0]; //was[1] if.bind removes from DOM\n//        console.log(this.viewerdom);\n      }\n      if (this.bindingContext.viewpanel1) {\n        this.bindingContext.childview = this;\n        this.viewerdom = $(\".fileviewer\")[0];\n//        console.log(this.viewerdom);\n      }\n      if (this.bindingContext.fileurl) this.fileurl = this.bindingContext.fileurl;\n//        console.log(this.fileurl);\n      var options = {\n        width: 'auto',\n        height: 'auto',\n        antialias: true,\n        quality : 'medium'\n        // background='black', outlineColor='white'\n      };\n      // insert the viewer under the Dom element with id 'gl'.\n        console.log(this);\n        console.log(this.viewer);\n        if (!this.viewer)\n            this.viewer = pv.Viewer(this.viewerdom, options);\n            if (this.fileurl) this.viewfile();\n        }\n\n// override the default options with something less restrictive.\n    bind(bindingContext,overrideContext) {\n      //this.filetoview = this.fileurl;\n      console.log(\"bind(). fileurl:\");\n      console.log(this.fileurl);\n      console.log(this.viewid);\n      console.log(bindingContext);\n      console.log(overrideContext);\n      this.bindingContext = bindingContext;\n      //TODO ugly tight coupling -adding refs to itself to parent\n\n    }\n\n    viewfile(fileurl) {\n        if (fileurl) this.fileurl = fileurl;\n        console.log(\"viewFile(). fileurl:\");\n        console.log(this.fileurl);\n        if (this.fileurl && this.fileurl.endsWith('pdb')) {\n            this.loadfromurl(this.fileurl);\n            //loadlocalpdbfile();\n        }\n\n    }\n\n    created(owningView,myview) {\n        this.parent = owningView;//.controller.viewModel;\n//        console.log('viewpanel.created');\n//        console.log(this.parent);\n        //\n    }\n\n    // given the contents of a PDB file, show the structure\n    process(pdb) {\n\n        var structure = pv.io.pdb(pdb);\n        this.viewer.cartoon('protein', structure, { color : color.ssSuccession() });\n        this.viewer.centerOn(structure);\n    }\n\n    loadlocalpdbfile() {\n    }\n\n    loadpdbfile() {\n        var url = 'http://files.rcsb.org/view/' + this.pdbentry + '.pdb';\n        //console.log('loadpdbfile()');\n        this.loadfromurl(url)\n    }\n    loadfromurl(url) {\n        client.get(url)\n            .then(data => {\n    //            console.log('loadpdbfile()');\n      //          console.log(data);\n                this.process(data.response);\n            })\n            .catch(error => {\n                console.log(error);\n                alert('Sorry, response: '+error.statusCode+':'+error.statusText+' when trying to get: '+url);\n            });\n    }\n\n     loadfromredo() {\n       this.loadfromurl('http://www.cmbi.ru.nl/pdb_redo/'\n    +this.pdbentry2.substring(1,3)+'/'\n    +this.pdbentry2+'/'+this.pdbentry2+'_final.pdb')\n}\n\n}\n\n","import {EventAggregator} from 'aurelia-event-aggregator';\nimport {SelectedFile} from '../filepicker/messages';\nimport {computedFrom} from 'aurelia-framework';\n\nexport class App {\n  static inject = [EventAggregator];\n\n  constructor(ea) {\n    this.ea = ea;\n    this.ea.subscribe(SelectedFile, msg => this.selectFile(msg.file,msg.senderid));\n  }\n\n  selectFile(file,senderid){\n    console.log(\"selectFile()\")\n    console.log(file);\n    console.log(senderid);\n    //window.opener.postMessage(window.location.protocol+\"//\"+window.location.hostname+file.webdavuri, \"*\");\n    //window.close();\n  }\n\n  closeviewer(){\n  }\n\n}\n","export default {\n  debug: true,\n  testing: false\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/**\n * Created by Tomas Kulhanek on 2/10/17.\n */\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {SelectedFile,VisualizeFile,EditFile} from '../filepicker/messages';\nimport {SelectedTab} from '../tabs/messages';\nimport {computedFrom} from 'aurelia-framework';\n\nexport class Panel {\n    static inject = [EventAggregator];\n\n    constructor(ea) {\n        this.ea = ea;\n\n        this.ea.subscribe(SelectedFile, msg => this.selectFile(msg.file,msg.senderid));\n        this.ea.subscribe(SelectedTab, msg => this.selectTab(msg.tabid));\n        //generate unique id from time\n        this.uid = new Date().valueOf();\n        this.ids=[this.uid+'.list',this.uid+'.view',this.uid+'.visual',this.uid+'.analyse',this.uid+'.dataset']; //prefix uid to tab ids\n\n        this.selectedTab= this.ids[0];\n        this.paneltabs = [\n            { id: this.ids[0], label: 'File List'},\n            { id: this.ids[1], label: 'View/Edit' },\n            { id: this.ids[2], label: 'Visualize' },\n          { id: this.ids[3], label: 'Analyse' },\n          { id: this.ids[4], label: 'Dataset' }\n        ];\n        this.selectedAnalyse=this.selectedView=this.selectedVisual=this.selectedDataset=false;\n        this.selectedList=true;\n    }\n\n    /*@computedFrom('selectedTab')\n    get selectedList() {\n        return this.selectedTab=='list';\n    }\n\n    @computedFrom('selectedTab')\n    get selectedView() {\n        return this.selectedTab=='view';\n    }\n\n    @computedFrom('selectedTab')\n    get selectedVisual() {\n        return this.selectedProvider=='visual';\n    }\n    */\n    selectTab(tabid){\n        //if uid belongs to mine - change tab, otherwise ignore this message\n        if (tabid.startsWith(this.uid)) {\n            this.selectedTab = tabid;\n            this.selectedList = this.selectedTab == this.ids[0];\n            this.selectedView = this.selectedTab == this.ids[1];\n            this.selectedVisual = this.selectedTab == this.ids[2];\n          this.selectedAnalyse=  this.selectedTab == this.ids[3];\n          this.selectedDataset = this.selectedTab == this.ids[4];\n        }\n    }\n\n    selectFile(file,senderid) {\n      //default action, visualize pdb, change tab\n      if (senderid==this.uid) {\n        if (file.webdavuri.endsWith('pdb')) {\n          //visualize\n          this.selectTab(this.ids[2]);\n          this.ea.publish(new VisualizeFile(file,senderid));\n        } else {\n          //edit/raw view\n          this.selectTab(this.ids[1]);\n          this.ea.publish(new EditFile(file,senderid));\n        }\n      }\n    }\n}\n","/**\n * Created by Tomas Kulhanek on 11/29/16.\n */\n\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {SelectedFile} from '../filepicker/messages';\nimport {HttpClient} from 'aurelia-http-client';\n\nexport class  Viewpanelpv {\n  static inject = [EventAggregator,HttpClient];\n    constructor(ea,httpclient) {\n      this.ea = ea;\n      this.httpclient = httpclient;\n      this.ea.subscribe(VisualizeFile, msg => this.viewfile(msg.file));\n    }\n\n    attached(){\n        console.log('viewpanel.attached()')\n      this.viewerdom = $(\".fileviewer\")[0];\n      console.log(this.viewerdom);\n      var options = {\n        width: '1200',\n        height: '600',\n        antialias: true,\n        quality : 'medium'\n      };\n      // insert the viewer under the Dom element with id 'gl'.\n        console.log(this);\n        console.log(this.viewer);\n        if (!this.viewer)\n            this.viewer = pv.Viewer(this.viewerdom, options);\n        }\n\n    viewfile(file) {\n      //if (file.webdavuri.endsWith('pdb')) {\n        this.fileurl = file.webdavuri;\n        console.log(\"viewfile()\");\n        console.log(file.webdavuri);\n        this.loadfromurl(file.webdavuri);\n    }\n\n    // given the contents of a PDB file, show the structure\n    process(pdb) {\n        var structure = pv.io.pdb(pdb);\n        this.viewer.cartoon('protein', structure, { color : color.ssSuccession() });\n        this.viewer.centerOn(structure);\n    }\n\n    loadlocalpdbfile() {\n    }\n\n    loadpdbfile() {\n        var url = 'http://files.rcsb.org/view/' + this.pdbentry + '.pdb';\n        //console.log('loadpdbfile()');\n        this.loadfromurl(url)\n    }\n\n    loadfromurl(url) {\n        this.httpclient.get(url)\n            .then(data => {\n              console.log(\"loadfromurl() OK\");\n              console.log(data.response);\n                this.process(data.response);\n            })\n            .catch(error => {\n              console.log(\"loadfromurl() error\");\n                console.log(error);\n                alert('Sorry, response: '+error.statusCode+':'+error.statusText+' when trying to get: '+url);\n            });\n    }\n\n     loadfromredo() {\n       this.loadfromurl('http://www.cmbi.ru.nl/pdb_redo/'\n    +this.pdbentry2.substring(1,3)+'/'\n    +this.pdbentry2+'/'+this.pdbentry2+'_final.pdb')\n}\n\n}\n\n","import {EventAggregator} from 'aurelia-event-aggregator';\nimport {SelectedFile} from './messages';\n\nexport class App {\n  static inject = [EventAggregator];\n\n  constructor(ea) {\n    this.ea = ea;\n    this.ea.subscribe(SelectedFile, msg => this.selectFile(msg.file));\n  }\n\n  selectFile(file){\n    console.log(\"selectFile()\")\n    console.log(file);\n    window.opener.postMessage(window.location.protocol+\"//\"+window.location.hostname+file.webdavuri, \"*\");\n    window.close();\n  }\n\n}\n","export default {\n  debug: true,\n  testing: false\n};\n","/**\n * Created by vagrant on 9/28/16.\n */\n\nimport {HttpClient} from 'aurelia-http-client';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {SelectedFile} from './messages';\nimport {bindable} from 'aurelia-framework';\n\nexport class Filepanel{\n  static inject = [EventAggregator,HttpClient];\n  @bindable panelid;\n\n  constructor(ea,httpclient) {\n        this.ea = ea;\n        this.client = httpclient;\n        this.files = [];\n        this.filescount = this.files.length;\n        this.path= \"\";\n        this.lastpath=\"\";\n        this.dynatable = {};\n        this.serviceurl = \"/metadataservice/files\";\n        //http to accept json\n        this.client.configure(config=>{\n            config.withHeader('Accept','application/json');\n            config.withHeader('Content-Type','application/json');\n        });\n        console.log(\"filepanel tableid:\"+this.panelid);\n    }\n\n    //triggered after this object is placed to DOM\n    attached() {\n\n        //read the directory infos\n        this.client.get(this.serviceurl)\n            .then(data => {\n                if (data.response) {\n                    this.populateFiles(data.response);\n                }\n            }).catch(error => {\n\n                console.log('Error');\n                console.log(error);\n                alert('Sorry, response: '+error.statusCode+':'+error.statusText+' when trying to get: '+this.serviceurl);\n            });\n      console.log(\"filepanel tableid:\"+this.panelid);\n    }\n\n    //parse .NET encoded Date in JSON\n    dateTimeReviver(key, value) {\n        var a;\n        if (typeof value === 'string') {\n            a = /\\/Date\\(([\\d\\+]*)\\)\\//.exec(value);\n            if (a) {\n                return new Date(parseInt(a[1])).toLocaleDateString('en-GB');\n            }\n        }\n        return value;\n    }\n\n    //removes last subdirectory\n    cdup(){\n        this.lastpath= this.path;\n        let sepIndex= this.path.lastIndexOf('/');\n        this.path = this.path.substring(0,sepIndex);\n    }\n\n    //adds subdirectory to the path\n    cddown(subdir) {\n      this.lastpath=this.path;\n        this.path+='/'+subdir;\n    }\n\n\n    //change folder, reads the folder content and updates the table structure\n    changefolder(folder){\n        if (!this.lock) {\n            this.lock = true;\n            if (folder) {\n                if (folder == '..') this.cdup();\n                else this.cddown(folder);\n            }\n\n          this.client.get(this.serviceurl + this.path)\n                .then(data => {\n                    if (data.response) {\n                        this.populateFiles(data.response);\n                        //update files in table view\n                    }\n                    this.lock = false;\n                }).catch(error => {\n                console.log('Error');\n                console.log(error);\n                alert('Sorry, response: '+error.statusCode+':'+error.statusText+' when trying to get: '+this.serviceurl+this.path);\n                this.lock = false;\n                this.path=this.lastpath;\n            });\n        } //else doubleclick when the previous operation didn't finished\n    }\n\n    //refresh the file content\n    refresh() {\n        this.changefolder(); //changefolder with empty folder - just refresh\n    }\n\n    //parses response and fills file array with customization (DIRS instead of size number)\n    populateFiles(dataresponse){\n\n        this.files = JSON.parse(dataresponse,this.dateTimeReviver);//populate window list\n        this.filescount =  this.files.length;\n        if (this.path.length>0) {//non root path\n            this.files.unshift({name: \"..\", size: \"UP DIR\",date:\"\"}); //up dir item\n        }\n        this.files.forEach (function (item,index,arr){\n          if(!arr[index].name && arr[index].alias) {\n            arr[index].name=arr[index].alias;\n            arr[index].attributes = 16;\n            arr[index].date=\"\";\n          }\n          if (arr[index].attributes & 16) arr[index].size=\"DIR\"});\n    }\n\n    selectFile(file){\n      console.log(\"filepanel tableid:\"+this.panelid);\n      if (file.size.endsWith && file.size.endsWith('DIR')) this.changefolder(file.name);\n      else this.ea.publish(new SelectedFile(file,this.panelid));\n    }\n\n}\n\n\n\n\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/**\n * Created by Tomas Kulhanek on 1/9/17.\n */\n\nexport class SelectedFile {\n  constructor(file,senderid){\n    this.file = file;\n    this.senderid = senderid;\n  }\n}\n\nexport class VisualizeFile {\n  constructor(file,senderid){\n    this.file = file;\n    this.senderid = senderid;\n  }\n}\n\nexport class EditFile {\n  constructor(file,senderid){\n    this.file = file;\n    this.senderid = senderid;\n  }\n}\n","/**\n * Created by vagrant on 2/16/17.\n */\nimport {bindable, inject} from 'aurelia-framework';\n\nexport class  Analysepanel {\n  static inject = [Element];\n  @bindable pdbids;\n  //@bindable pdbid;\n\n  constructor(el) {\n    this.pdbids=['1cbs','2hhd'];\n    //this.pdbIds=['1cbs','2hhd'];\n    this.element=el;\n  }\n\n  attached() {\n    var el = this.element;\n    this.pdbids.forEach(function(pdbid){\n      el.insertAdjacentHTML('beforeend',\n        \"<a class='pdb-links' pdb-id='\"+pdbid+\"' href='javascript:void(0);'>\"+pdbid+\"</a><hr/>\");\n\n    });\n\n\n\n      angular.bootstrap(this.element, ['pdb.component.library']);\n  }\n\n  pdbidsChanged(newValue, oldValue) {\n    this.element.setAttribute('pdbids', newValue);\n  }\n\n  pdbidChanged(newValue, oldValue) {\n    this.element.setAttribute('pdbid', newValue);\n  }\n\n}\n","/**\n * Created by vagrant on 2/21/17.\n */\n/*\n<script type=\"text/javascript\" src=\"/scripts/autocomplete/build/inline.bundle.js\"></script>\n  <script type=\"text/javascript\" src=\"/scripts/autocomplete/build/vendor.bundle.js\"></script>\n  <script type=\"text/javascript\" src=\"/scripts/autocomplete/build/main.bundle.js\"></script>\n*/\n\n//import \"autocomplete\";\n\n//import \"autocomplete\";\nimport {HttpClient} from \"aurelia-http-client\";\nimport {computedFrom} from 'aurelia-framework';\n\n//Model view controller\n//Model view viewmodel\n\nexport class Dataset {\n  static inject = [Element,HttpClient];\n\n  constructor (element,httpclient) {\n    this.element = element;\n    this.pdbdataset = [];\n    this.pdbdataitem = \"\";\n    this.pdblinkset = [];\n    this.pdbdataitem = \"\";\n    this.submitdisabled2 = true;\n    let date = new Date();\n    this.name=\"dataset-\"+date.getFullYear()+\".\"+(date.getMonth()+1)+\".\"+date.getDate();\n    this.client = httpclient;\n    this.client.configure(config=> {\n      config.withHeader('Accept', 'application/json');\n      config.withHeader('Content-Type', 'application/json');\n    });\n\n  }\n\n  //@computedFrom('submitdisabled2')\n  //TODO check,test to trigger only when pdbdataset is changed\n  get canSubmit() {\n    //console.log(\"disabled? \"+this.pdbdataset.length);\n    if (this.pdbdataset.length>0)\n      return true;\n    else\n      return false;\n\n  }\n\n  /*bootstrapPdbeAutocomplete(){\n    console.log(\"pdb-autocomplete bootstrap()\");\n    var event;\n    if (typeof MouseEvent == 'function') {\n      event = new MouseEvent('PDBeWebComponentsReady', { 'view': window, 'bubbles': true, 'cancelable': true });\n    } else if (typeof document.createEvent == 'function') {\n      event = document.createEvent('MouseEvents');\n      event.initEvent('PDBeWebComponentsReady', true, true );\n    }\n    //Dispatch\n    document.dispatchEvent(event);\n  }\n\n  attached() {\n    console.log(\"Dataset attached(), calling bootstrap.\")\n    var PdbeAutocompleteSearchConfig = {\n      resultBoxAlign: 'left',\n      redirectOnClick: false,\n      searchUrl: '//www.ebi.ac.uk/pdbe/search/pdb-autocomplete/select',\n      fields: 'value,num_pdb_entries,var_name',\n      group: 'group=true&group.field=category',\n      groupLimit: '25',\n      sort: 'category+asc,num_pdb_entries+desc',\n      searchParams: 'rows=20000&json.nl=map&wt=json'\n    }\n    document.addEventListener('PDBe.autocomplete.click', function(e){ console.log(e.eventData) })\n\n    //this.bootstrapPdbeAutocomplete();\n  }\n*/\n  additem(){\n    console.log(\"additem()\");\n    this.pdbdataset.unshift(this.pdbdataitem);\n\n    //this.canSubmit = this.pdbdataset.length>0?true:false;\n  }\n\n  removeitem(itemtodelete){\n    this.pdbdataset = this.pdbdataset.filter(item => item!== itemtodelete);\n  }\n\n  submit(){\n    this.client.put(\"/metadataservice/dataset\",JSON.stringify(this.pdbdataset))\n      .then(data =>{\n        console.log(\"data response\");\n        console.log(data);9\n      })\n      .catch(error =>{\n        console.log(error);\n        alert('Sorry. Dataset not submitted  at '+this.serviceurl+' error:'+error.response+\" status:\"+error.statusText)\n      });\n  }\n}\n","/**\n * Created by Nurul on 3/10/17.\n */\n\nexport class EntryIdCustomAttribute {\n  static inject = [Element]\n\n  constructor (element) {\n    this.element = element;\n  }\n\n  /* set's DOM atribute to the binded value.\n   valueChanged() is triggered by Aurelia,\n   when the value is bind - before attached()\n   this.value\n   */\n  valueChanged(newValue,oldValue){\n    this.element.setAttribute('entry-id',this.value);\n  }\n\n\n\n  /* bootstrap the pdb component library just from the element */\n  attached(){\n    angular.bootstrap(this.element, ['pdb.component.library']);\n  }\n}\n","/**\n * Created by Tomas Kulhanek on 2/27/17.\n */\n\n// PdbId => pdb-id MyCustomAttribute => my-custom-attribute\n\nexport class PdbIdCustomAttribute {\n  static inject = [Element]\n\n  constructor (element) {\n    this.element = element;\n  }\n\n  /* set's DOM atribute to the binded value.\n   valueChanged() is triggered by Aurelia,\n   when the value is bind - before attached()\n   this.value\n   */\n  valueChanged(newValue,oldValue){\n   //console.log('valueChanged() element:'+this.element.tagName+\" newvalue:\"+newValue+' this.value:'+this.value+' current.attribute.pdb-id:'+ this.element.getAttribute('pdb-id'));\n    // <pdb-redo pdb-id=\"item\"></pdb-redo> -> valueChange()\n   this.element.setAttribute('pdb-id',this.value);\n   //  <pdb-redo pdb-id=\"2sc3\">\n\n   //console.log(this.element.getAttribute('pdb-id'));\n  }\n\n\n\n  /* bootstrap the pdb component library just from the element */\n  attached(){\n    angular.bootstrap(this.element, ['pdb.component.library']);\n  }\n}\n","/**\n * Created by Tomas Kulhanek on 2/27/17.\n */\n\nexport class PdbIdsCustomAttribute {\n  static inject = [Element]\n\n  constructor (element) {\n    //console.log('pdbids()');\n    this.element = element;\n  }\n\n  /* set's DOM atribute to the binded value.\n     valueChanged() is triggered by Aurelia,\n     when the value is bind - before attached()\n  */\n  valueChanged(newValue,oldValue) {\n    console.log('pdbids.valueChanged() element:'+this.element.tagName+\" newvalue:\"+newValue+' this.value:'+this.value+' current.attribute.pdb-ids:'+ this.element.getAttribute('pdb-ids'));\n    console.log(this.value); // pdb-ids separated by coma -\n    // \"2hhd,1r6a,4yg0\"\n    this.pdbids = this.value.split(',');\n    // [ 2hhd, 1r6a, 4yg0 ] -> array()\n    this.pdbidsjson = JSON.stringify(this.pdbids);\n    // \"[ \"2hhd\", \"1r6a\", \"4yg0\" ]\"\n    this.element.setAttribute('pdb-ids',this.pdbidsjson);\n    //bootstrap only if something is in an array\n    if (this.pdbids.length>0) angular.bootstrap(this.element, ['pdb.component.library']);\n  }\n\n}\n\n","/**\n * Created by Tomas Kulhanek on 2/27/17.\n */\n\nimport {bindable} from 'aurelia-framework';\nimport {HttpClient} from 'aurelia-http-client';\nimport {Sasclient} from './sasclient';\n\nexport class Pdbautocompletesearch {\n  @bindable searchbox = \"\";\n  static inject = [HttpClient];\n\n  constructor(httpclient) {\n    this.searchbox=\"\";\n    this.sasclient = new Sasclient(httpclient);\n  }\n\n  //triggered when the element is attached to DOM\n  attached(){\n\n  }\n\n\n  searchboxChanged(newVal,oldVal) {\n    console.log(\"pdbautocomplete.searchboxChanged()\");\n    console.log(this.searchbox);\n    this.sasclient.search(this.searchbox);\n  }\n\n}\n","/**\n * Created by vagrant on 2/27/17.\n */\n\nexport class Sasclient {\n\n  constructor(httpclient){\n    this.httpclient = httpclient;\n    this.config = {\n      resultBoxAlign: 'left',\n      redirectOnClick: false,\n      searchUrl: '//www.ebi.ac.uk/pdbe/search/pdb-autocomplete/select',\n      fields: 'value,num_pdb_entries,var_name',\n      group: 'group=true&group.field=category',\n      groupLimit: '25',\n      sort: 'category+asc,num_pdb_entries+desc',\n      searchParams: 'rows=20000&json.nl=map&wt=json'\n    }\n  }\n\n  search(term){\n    //http://www.ebi.ac.uk/pdbe/search/pdb/select?fl=pdb_id,organism_synonyms,number_of_bound_entities,+number_of_protein_chains,experimental_method,+experiment_data_available,expression_host_sci_name,+citation_year,+entry_organism_scientific_name,number_of_RNA_chains,number_of_DNA_chains,sample_preparation_method,emdb_id&group=true&group.field=pdb_id&group.limit=100&rows=1000&wt=json&q=pdb_id:(1cbs)\n    //http://www.ebi.ac.uk/pdbe/search/pdb-autocomplete/select?rows=20000&json.nl=map&wt=json&group=true&group.field=category&fl=value,num_pdb_entries,var_name&sort=category+asc,num_pdb_entries+desc&group.limit=25&q=value:2hh*~10\n    //http://www.ebi.ac.uk/pdbe/search/pdb-autocomplete/select?rows=20000&json.nl=map&wt=json&fl=value,num_pdb_entries,var_name&group=true&group.field=category&sort=category+asc,num_pdb_entries+desc&group.limit=25&q=value:2hh*~10\n    let url = this.config.searchUrl+\"?\"+this.config.searchParams+\"&fl=\"+this.config.fields+ \"&\"+this.config.group+\"&sort=\"+this.config.sort+\"&group.limit=\"+this.config.groupLimit+\"&q=value:\"+term+\"*~10\";\n\n    this.httpclient.get(url)\n      .then(data => {\n        if (data.response) {\n\n          return data.response.grouped.category.groups\n        }\n      }).catch(error => {\n\n      console.log('Error');\n      console.log(error);\n    });\n  }\n\n  searchMore(term) {\n\n  }\n\n}\n","\n/**\n * Created by Tomas Kulhanek on 11/29/16.\n */\n\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {VisualizeFile} from '../filepicker/messages';\nimport {HttpClient} from 'aurelia-http-client';\nimport {bindable} from 'aurelia-framework';\n\nexport class  Viewpanel {\n    static inject = [Element,EventAggregator, HttpClient];\n    @bindable panelid;\n\n    constructor(el,ea, httpclient) {\n        this.element = el;\n        this.ea = ea;\n        this.httpclient = httpclient;\n      this.ea.subscribe(VisualizeFile, msg => this.viewfile(msg.file,msg.senderid));\n        //this.uid = new Date().valueOf().toString();\n        this.sourceurl=\"\";\n        this.sourceformat=\"pdb\";\n      this.pdbentry = \"1r6a\";\n    }\n\n    attached() {\n      angular.bootstrap(this.element.querySelector('#pdbviewer'), ['pdb.component.library']);\n    }\n\n    viewfile(file,senderid) {\n      //view files only in my panel, ignore other panels\n        console.log(\"viewfile \"+file.webdavuri);\n        var pdblitemol = '<pdb-lite-mol load-ed-maps=\"true\" source-url=\"'+ file.webdavuri+'\" pdb-id=\"\\'\\'\" source-format=\"pdb\"></pdb-lite-mol>';\n        this.replacepdblitemol(pdblitemol);\n    }\n\n  loadpdb() {\n    console.log(\"loadpdb \"+this.pdbentry);\n    var pdblitemol = '<pdb-lite-mol load-ed-maps=\"true\" pdb-id=\"\\''+this.pdbentry+'\\'\"></pdb-lite-mol>'\n    this.replacepdblitemol(pdblitemol);\n  }\n\n  replacepdblitemol(pdblitemol) {\n      //remove pdblitemol\n      var pdbviewer = this.element.querySelector('#pdbviewer');\n      var parentnode = this.element.querySelector('#pdbwrapper');\n      parentnode.removeChild(pdbviewer);\n      //create pdblitemol\n      parentnode.insertAdjacentHTML('afterbegin', '<div style=\"position:relative;height:400px;width:800px;\" id=\"pdbviewer\">'+pdblitemol+'</div>');\n\n      //call angular bootstrap\n      angular.bootstrap(this.element.querySelector('#pdbviewer'), ['pdb.component.library']);\n    }\n\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","/**\n * Created by Tomas Kulhanek on 1/9/17.\n */\n\nexport class SelectedTab {\n  constructor(tabid){\n    this.tabid = tabid;\n  }\n}\n","import {bindable, inject} from 'aurelia-framework';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {SelectedTab} from './messages';\n//import $ from 'jquery';\n//import {tabs} from 'jquery-ui';\n\n\nexport class Tabs {\n    @bindable tabs = null;\n    static inject = [Element,EventAggregator];\n\n\n    constructor(el,ea) {\n        this.id = el.id;\n        this.element= el;\n        this.ea=ea;\n    }\n\n    attached() {\n        //console.log(\"tabs.atached() tabs: \"+this.tabs);\n;\n\n    }\n\n    opentab(tabid){\n        this.activeid=tabid.id;\n        //console.log(\"Tabs selected:\"+this.activeid);\n        this.ea.publish(new SelectedTab(this.activeid));\n    }\n\n}\n","\nexport class App {\n\n}\n","/**\n * Created by Tomas Kulhanek on 1/16/17.\n */\nimport {Modulecontrol} from \"./modulecontrol\";\n\nexport class Ccp4control extends Modulecontrol{\n  constructor(){\n    super();\n    this.posturl=\"/metadataservice/sbservice/ccp4suite\";\n    this.url=\"/metadataservice/sbservice/ccp4suite\";\n  }\n\n\n}\n","import environment from '../environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/**\n * Created by Tomas Kulhanek on 1/16/17.\n */\n\nimport {HttpClient} from 'aurelia-http-client';\n\nexport class Modulecontrol{\n\n  constructor () {\n    this.httpclient=new HttpClient();\n    this.url=window.location.href;\n    this.enabled=false;\n    this.httpclient.configure(config=> {\n      config.withHeader('Accept', 'application/json');\n      config.withHeader('Content-Type', 'application/json');\n    });\n\n  }\n\n  attached(){\n    console.log(\"attached() url:\"+this.url);\n    this.httpclient.get(this.url)\n      .then(response => this.okcallback(response))\n      .catch(error => this.failcallback(error))\n  }\n\n  okcallback(response){\n    console.log(\"okcallback()\");\n    var res= JSON.parse(response.response);\n    console.log(res.enabled);\n    this.enabled= res.enabled;\n  }\n\n  failcallback(error){\n    this.enabled=false;\n    console.log('Sorry, error when connecting backend web service at '+this.url+' error:'+error.response+\" status:\"+error.statusText);\n  }\n\n  enable(){\n    this.httpclient.post(this.url)\n      .then(response => this.okcallback(response))\n      .catch(error => this.failcallback(error))\n  }\n\n}\n","/**\n * Created by Tomas Kulhanek on 1/16/17.\n */\n\nexport class Modulesetting {\n\n}\n","/**\n * Created by Tomas Kulhanek on 1/16/17.\n */\nimport {Modulecontrol} from \"./modulecontrol\";\n\nexport class Scipioncontrol extends Modulecontrol{\n constructor(){\n   super();\n   this.url=\"/metadataservice/sbservice/scipion\";\n   this.posturl=\"/metadataservice/sbservice/scipion\";\n }\n\n}\n","/**\n * Created by Tomas Kulhanek on 1/16/17.\n */\nimport {Modulecontrol} from \"./modulecontrol\";\n\nexport class Virtuosocontrol extends Modulecontrol {\n  constructor(){\n    super();\n    this.url=\"/metadataservice/sbservice/virtuoso\";\n  }\n\n\n}\n","/**\n * Created by Tomas Kulhanek on 1/6/17.\n */\nimport {HttpClient} from 'aurelia-http-client';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {SettingsSubmitted} from './messages';\n\n//let client = new HttpClient();\n\n/**\n * Aliastable component gets the currently registered aliases for file providers\n * and shows them in a table\n */\nexport class Aliastable {\n  static inject = [EventAggregator,HttpClient];\n\n  constructor(ea,httpclient){\n    this.serviceurl = \"/metadataservice/files\";\n    ea.subscribe(SettingsSubmitted, msg => this.submitSettings(msg.settings) );\n    this.client=httpclient;\n    this.providers=[{alias:\"Loading available providers ...\",temporary:true}];\n    this.client.configure(config=> {\n      config.withHeader('Accept', 'application/json');\n      config.withHeader('Content-Type', 'application/json');\n    });\n  }\n\n  attached() {\n    //gets the status of the b2drop connection\n    this.client.get(this.serviceurl)\n      .then(data => {\n        console.log(\"data response\");\n        console.log(data);\n        if (data.response) {\n          this.providers = JSON.parse(data.response);\n        }\n      })\n      .catch(error =>{\n        console.log(error);\n\n        alert('Sorry, error when connecting backend web service at '+this.serviceurl+' error:'+error.response+\" status:\"+error.statusText)\n      });\n  }\n\n  submitSettings(settings) {\n    this.client.put(this.serviceurl,JSON.stringify(settings))\n      .then(data =>{\n        console.log(\"data response\");\n        console.log(data);\n        if (data.response) {\n          this.providers = JSON.parse(data.response);\n        }\n      })\n      .catch(error =>{\n      console.log(error);\n\n      alert('Sorry. Settings not submitted  at '+this.serviceurl+' error:'+error.response+\" status:\"+error.statusText)\n    });\n\n  }\n\n  removeProvider(settings){\n    //console.log(\"removeProvider() \"+alias);\n    if (!confirm('Do you really want to delete the provider with alias \"'+settings.alias+'\" ?'))\n      return;\n    this.client.delete(this.serviceurl+\"/\"+settings.alias)\n      .then(data =>{\n        console.log(\"data response\");\n        console.log(data);\n        if (data.response) {\n          this.providers = JSON.parse(data.response);\n        }\n      });\n  }\n\n}\n","import {EventAggregator} from 'aurelia-event-aggregator';\nimport {SettingsSubmitted, SettingsSelected} from './messages';\n\nexport class App {\n  static inject = [EventAggregator];\n\n  constructor(ea) {\n    this.showprovider = false;\n    ea.subscribe(SettingsSubmitted, msg => this.submitSettings(msg.settings) )\n    ea.subscribe(SettingsSelected, msg => this.selectSettings(msg.settings) )\n    // wait for assignement this.genericcontrol from children\n  }\n\n  newProvider(){\n    this.showprovider = true;\n  }\n\n  submitSettings(settings){\n    //console.log('addProvider: not yet implemented');\n    this.showprovider = false;\n    //get provider info from subcomponent\n  }\n\n  selectSettings(settings){\n    //console.log('addProvider: not yet implemented');\n    this.showprovider = true;\n    //get provider info from subcomponent\n  }\n\n}\n","/**\n * Created by Tomas Kulhanek on 1/10/17.\n */\n/**\n * Created by Tomas Kulhanek on 1/5/17.\n */\n\nimport {UrlUtils} from './urlutils';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {SettingsSelected} from './messages';\n\n//let client = new HttpClient();\n\nexport class DropboxControl {\n\n  static inject = [EventAggregator, UrlUtils];\n\n  constructor(ea,urlutils){\n    //this.dbx = dropbox;\n    // Parses the url and gets the access token if it is in the urls hash\n    this.ea= ea;\n    this.urlutils = urlutils;\n    this.accesstoken=this.urlutils.parseQueryString(window.location.hash).access_token;\n    this.isAuthenticated = !!this.accesstoken;\n    console.log('dropboxcontrol() accesstoken:'+this.accesstoken);\n\n    //instantiate dropboxclient - needed for getting URL to redirect\n    this.CLIENTIDENC = \"o\\\"csb%'{{{ze'ya\";\n    var dbx = new Dropbox({clientId: this.CLIENTIDENC.split('').map( function(c) {\n      return String.fromCharCode( 23 ^ c.charCodeAt() );\n    }).join(\"\")});\n\n    var currentUrl = window.location.href;\n    console.log('dropboxcontrol() current url:' + currentUrl);\n    this.authurl = dbx.getAuthenticationUrl(currentUrl);\n    console.log(this.dropBoxAuthUrl);\n    this.id=\"Dropbox\";\n  }\n\n  initialize(){\n    if (this.isAuthenticated) {\n      var settings = {};\n      settings.type=this.id;\n      //settings.alias = this.alias;\n      settings.securetoken = this.accesstoken;\n      //else settings.username = this.username;\n      //if (this.password) settings.securetoken = this.password;\n      this.ea.publish(new SettingsSelected(settings));\n    }\n  }\n\n}\n","/**\n * Created by Tomas Kulhanek on 1/5/17.\n */\nimport {HttpClient} from 'aurelia-http-client';\nimport {computedFrom} from 'aurelia-framework';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {SettingsSubmitted} from './messages';\nimport {DropboxControl} from './dropboxcontrol';\nimport {SettingsSelected} from './messages';\n\nexport class Genericcontrol {\n\n  static inject = [EventAggregator, HttpClient,DropboxControl];\n\n\n  constructor(ea,httpclient,dropboxcontrol) {\n    this.heading=\"File Provider\";\n    this.ea= ea;\n    this.dropboxcontrol=dropboxcontrol;\n    this.editing=true;\n    this.servicecontext = \"providers\";\n    this.knowtoken=false;\n    this.dropboxauthurl = \"\";\n    this.providers = [];\n    this.selectedProvider=\"\";\n    console.log('genericcontrol()');\n    this.client=httpclient;\n    this.client.configure(config=> {\n      config.withHeader('Accept', 'application/json');\n      config.withHeader('Content-Type', 'application/json');\n    });\n    this.ea.subscribe(SettingsSelected, msg => this.selectSettings(msg.settings) )\n  }\n\n  @computedFrom('selectedProvider')\n  get selectedDropbox() {\n    return this.selectedProvider==this.dropboxcontrol.id;\n  }\n\n  @computedFrom('selectedProvider')\n  get selectedB2Drop() {\n    return this.selectedProvider=='B2Drop';\n  }\n\n  @computedFrom('selectedProvider')\n  get selectedFileSystem() {\n    return this.selectedProvider=='FileSystem';\n  }\n  @computedFrom('selectedProvider')\n  get selectedWebDav() {\n    return this.selectedProvider=='WebDav';\n  }\n\n  get knowntoken(){\n    if (this.knownSecureToken) return this.knownSecureToken.checked;\n  }\n\n  clear(){\n    this.selectedProvider=\"\";\n    this.username=\"\";\n    this.securetoken=\"\";\n    this.filesystempath=\"\";\n    this.alias=\"\";\n    this.accessurl=\"\";\n  }\n\n  attached() {\n    console.log('genericcontrol.attached()');\n    console.log(\"dialogstate:\"+this.dialogstate);\n    //attach parent with the instance\n    //this.bindingContext.genericcontrol = this;\n    //gets the status of the b2drop connection\n    this.dropboxauthurl = this.dropboxcontrol.authurl;\n    this.client.get(\"/metadataservice/\"+this.servicecontext)\n      .then(data => {\n        console.log(\"data response\");\n        console.log(data);\n        if (data.response) {\n          this.providers = JSON.parse(data.response);\n        }\n      });\n    this.dropboxcontrol.initialize();\n  }\n\n  addProvider() {\n     var settings = {};\n     settings.type=this.selectedProvider;\n     settings.alias = this.alias;\n     if (this.selectedDropbox) settings.securetoken = this.securetoken;\n     if (this.selectedFileSystem) settings.securetoken = this.filesystempath;\n     if (this.selectedB2Drop) {\n       settings.securetoken = this.password;\n       settings.username = this.username;\n     }\n     if (this.selectedWebDav){\n       settings.accessurl=this.accessurl;\n       settings.securetoken = this.password;\n       settings.username = this.username;\n     }\n     console.log(\"publishing\");\n     this.ea.publish(new SettingsSubmitted(settings));\n      this.clear();\n  }\n\n  selectSettings(settings){\n    this.selectedProvider=settings.type;\n    this.alias=settings.alias;\n    this.securetoken=settings.securetoken;\n    if (!!this.securetoken) { this.editing=false; this.knownSecureToken.checked=true; }\n  }\n\n}\n","import environment from '../environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/**\n * Created by Tomas Kulhanek on 1/9/17.\n */\n\nexport class SettingsSubmitted {\n  constructor(settings){\n    this.settings = settings;\n  }\n}\n\nexport class SettingsSelected {\n  constructor(settings){\n    this.settings = settings;\n  }\n}\n\nexport class SettingsRemoved {\n  constructor(settings){\n    this.settings = settings;\n  }\n}\n","/**\n * Created by Tomas Kulhanek on 1/10/17.\n */\n\nexport class UrlUtils {\n\n  constructor() {}\n\n  parseQueryString(str) {\n    var ret = Object.create(null);\n\n  if (typeof str !== 'string') {\n    return ret;\n  }\n\n  str = str.trim().replace(/^(\\?|#|&)/, '');\n\n  if (!str) {\n    return ret;\n  }\n\n  str.split('&').forEach(function (param) {\n    var parts = param.replace(/\\+/g, ' ').split('=');\n    // Firefox (pre 40) decodes `%3D` to `=`\n    // https://github.com/sindresorhus/query-string/pull/37\n    var key = parts.shift();\n    var val = parts.length > 0 ? parts.join('=') : undefined;\n\n    key = decodeURIComponent(key);\n\n    // missing `=` should be `null`:\n    // http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n    val = val === undefined ? null : decodeURIComponent(val);\n\n    if (ret[key] === undefined) {\n      ret[key] = val;\n    } else if (Array.isArray(ret[key])) {\n      ret[key].push(val);\n    } else {\n      ret[key] = [ret[key], val];\n    }\n  });\n\n  return ret;\n}\n\n}\n"],"sourceRoot":"../src"}