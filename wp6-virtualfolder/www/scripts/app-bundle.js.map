{"version":3,"sources":["app.js","environment.js","main.js","b2dropcontrol/acontrol.js","b2dropcontrol/app.js","b2dropcontrol/b2dropcontrol.js","b2dropcontrol/dropboxcontrol.js","b2dropcontrol/environment.js","b2dropcontrol/main.js","b2dropcontrol/onedrivecontrol.js","filemanager/actions.js","filemanager/app.js","filemanager/environment.js","filemanager/filepanel.js","filemanager/filesettings.js","filemanager/main.js","filemanager/viewpanel.js","resources/index.js","virtualfoldersetting/aliastable.js","virtualfoldersetting/app.js","virtualfoldersetting/dropboxcontrol.js","virtualfoldersetting/environment.js","virtualfoldersetting/genericcontrol.js","virtualfoldersetting/main.js","virtualfoldersetting/messages.js","virtualfoldersetting/urlutils.js","/home/vagrant/west-life-wp6-master/wp6-virtualfolder/www/src/app.html","/home/vagrant/west-life-wp6-master/wp6-virtualfolder/www/src/b2dropcontrol/app.html","/home/vagrant/west-life-wp6-master/wp6-virtualfolder/www/src/b2dropcontrol/b2dropcontrol.html","/home/vagrant/west-life-wp6-master/wp6-virtualfolder/www/src/b2dropcontrol/dropboxcontrol.html","/home/vagrant/west-life-wp6-master/wp6-virtualfolder/www/src/b2dropcontrol/onedrivecontrol.html","/home/vagrant/west-life-wp6-master/wp6-virtualfolder/www/src/filemanager/actions.html","/home/vagrant/west-life-wp6-master/wp6-virtualfolder/www/src/filemanager/app.html","/home/vagrant/west-life-wp6-master/wp6-virtualfolder/www/src/filemanager/filepanel.html","/home/vagrant/west-life-wp6-master/wp6-virtualfolder/www/src/filemanager/filesettings.html","/home/vagrant/west-life-wp6-master/wp6-virtualfolder/www/src/filemanager/viewpanel.html","/home/vagrant/west-life-wp6-master/wp6-virtualfolder/www/src/virtualfoldersetting/aliastable.html","/home/vagrant/west-life-wp6-master/wp6-virtualfolder/www/src/virtualfoldersetting/app.html","/home/vagrant/west-life-wp6-master/wp6-virtualfolder/www/src/virtualfoldersetting/genericcontrol.html"],"names":["App","message","debug","testing","configure","Promise","config","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","client","AControl","heading","username","usertoken","status","dialogstate","dialogstateconnected","dialogstateconnecting","dialogstateentry","servicecontext","showbutton","withHeader","updatestate","state","attached","console","log","get","data","response","myresponse","JSON","parse","connected","reconnect","addservice","servicename","postdata","securetoken","postdatajson","stringify","post","okcallback","failcallback","parseQueryString","str","ret","Object","create","trim","replace","split","forEach","param","parts","key","shift","val","length","join","undefined","decodeURIComponent","Array","isArray","push","B2dropcontrol","output","Dropboxcontrol","CLIENTID","showdropboxbutton","dropBoxAuthUrl","Dropbox","isAuthenticated","getAccessTokenFromUrl","dbx","clientId","currentUrl","window","location","href","getAuthenticationUrl","updatedropboxstate","hash","access_token","basicConfiguration","Onedrivecontrol","clientid","Actions","help","menu","view","edit","viewpanel1","viewpanel2","showhelp","fileurl","myKeypressCallback","keypressInput","bind","activate","addEventListener","deactivate","removeEventListener","e","doAction","fileitem","panelid","webdavuri","childview2","viewfile","childview","close1","close2","FilepanelCustomElement","name","defaultBindingMode","oneTime","on","files","filescount","path","dynatable","created","owningView","myview","parent","populateFiles","$","tableid","dataset","records","features","paginate","search","recordCount","perPageSelect","pushState","a","b","controller","viewModel","children","innerText","endsWith","changefolder","firstChild","fileindex","map","indexOf","catch","error","showdialog","alert","statusCode","statusText","dateTimeReviver","value","exec","Date","parseInt","toLocaleDateString","cdup","sepIndex","lastIndexOf","substring","cddown","subdir","folder","lock","d","settings","originalRecords","process","refresh","dataresponse","unshift","size","date","item","index","arr","attributes","FileSettings","Viewpanel","bindingContext","viewerdom","options","width","height","antialias","quality","viewer","pv","Viewer","overrideContext","viewid","loadfromurl","pdb","structure","io","cartoon","color","ssSuccession","centerOn","loadlocalpdbfile","loadpdbfile","url","pdbentry","loadfromredo","pdbentry2","Aliastable","ea","httpclient","serviceurl","subscribe","submitSettings","msg","providers","alias","temporary","put","inject","showprovider","selectSettings","newProvider","DropboxControl","urlutils","accesstoken","authurl","id","initialize","type","publish","Genericcontrol","dropboxcontrol","knowtoken","dropboxauthurl","selectedProvider","addProvider","selectedDropbox","selectedFileSystem","password","knownSecureToken","checked","SettingsSubmitted","SettingsSelected","UrlUtils"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n  constructor() {\n    this.message = 'Hello World!';\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/**\n * Created by Tomas Kulhanek on 12/8/16.\n */\nimport {HttpClient} from 'aurelia-http-client';\n\nlet client = new HttpClient();\n\nexport class AControl {\n\n    constructor() {\n        this.heading = \"connector\";\n        this.username = \"\";\n        this.usertoken = \"\";\n        this.status = \"unknown\";\n        this.dialogstate = 1;\n        this.dialogstateconnected, this.dialogstateconnecting = false;\n        this.dialogstateentry = true;\n        this.servicecontext=\"\";\n        this.showbutton = false;\n        client.configure(config=> {\n            config.withHeader('Accept', 'application/json');\n            config.withHeader('Content-Type', 'application/json');\n        });\n    }\n\n    updatestate(state) {\n        this.dialogstate = state;\n        this.dialogstateconnected = state == 3;\n        this.dialogstateconnecting = state == 2;\n        this.dialogstateentry = state == 1;\n    }\n\n    attached() {\n      console.log(\"Acontrol.attached()\");\n      console.log(\"dialogstate:\"+this.dialogstate);\n        //gets the status of the b2drop connection\n        client.get(\"/metadataservice/\"+this.servicecontext)\n            .then(data => {\n                this.status=\"disconnected\";\n                this.updatestate(1);\n                //console.log(\"data response\");\n                //console.log(data);\n                if (data.response) {\n                    let myresponse = JSON.parse(data.response);\n                    if (myresponse.connected) {\n                        this.status = \"OK\";\n                        this.updatestate(3);\n                    }\n                }\n            });\n    }\n\n    reconnect() {\n        //triggers to show dialog\n        this.updatestate(1);\n    }\n\n    /*    addb2drop(){ return this.addserviceb2dropconnector();}//\",this.b2dropOKCallback,this.b2dropFailCallback)}\n\n     adddropbox(){ return this.addservicedropboxconnector();}//\",this.dropboxOKCallback,this.dropboxFailCallback)}\n     */\n    addservice(servicename) { //post credentials to connect to b2dropconnector rest service\n        this.updatestate(2);\n        let postdata = {username: this.username, securetoken: this.usertoken};\n        //console.log(postdata);\n        let postdatajson = JSON.stringify(postdata);\n        //console.log(postdatajson);\n\n        client.post(\"/metadataservice/\" + servicename, postdatajson)\n            .then(data => {\n                //console.log(data.response);\n                let myresponse = JSON.parse(data.response);\n                if (myresponse.connected) {\n                    okcallback();\n                }\n                else {\n                    failcallback(myresponse);\n                }\n            });\n    }\n\n    failcallback() {\n        console.log('acontrol.okcallback() should be overridden')\n        //empty, implemented by child\n    }\n\n    okcallback() {\n        console.log('acontrol.okcallback() should be overridden')\n        //empty, implemented by child\n    }\n\n    parseQueryString(str) {\n        var ret = Object.create(null);\n\n        if (typeof str !== 'string') {\n            return ret;\n        }\n\n        str = str.trim().replace(/^(\\?|#|&)/, '');\n\n        if (!str) {\n            return ret;\n        }\n\n        str.split('&').forEach(function (param) {\n            var parts = param.replace(/\\+/g, ' ').split('=');\n            // Firefox (pre 40) decodes `%3D` to `=`\n            // https://github.com/sindresorhus/query-string/pull/37\n            var key = parts.shift();\n            var val = parts.length > 0 ? parts.join('=') : undefined;\n\n            key = decodeURIComponent(key);\n\n            // missing `=` should be `null`:\n            // http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n            val = val === undefined ? null : decodeURIComponent(val);\n\n            if (ret[key] === undefined) {\n                ret[key] = val;\n            } else if (Array.isArray(ret[key])) {\n                ret[key].push(val);\n            } else {\n                ret[key] = [ret[key], val];\n            }\n        });\n\n        return ret;\n    }\n}\n\n","/**\n * Created by vagrant on 9/6/16.\n */\n\nexport class App {\n\n}\n","/**\n * Created by vagrant on 9/6/16.\n */\nimport {HttpClient} from 'aurelia-http-client';\nimport {AControl} from './acontrol';\n\nlet client = new HttpClient();\n\nexport class B2dropcontrol extends AControl{\n\n    constructor (){\n        super();\n        this.heading=\"B2DROP connector\";\n        this.servicecontext = \"b2dropconnector\";\n    }\n\n    failcallback(myresponse) {\n        this.updatestate(1);\n        this.status = \"fail:\";\n        if (myresponse.output) {\n            this.status += myresponse.output;\n        }\n    }\n\n    okcallback() {\n        this.status = \"OK\";\n        this.updatestate(3);\n    }\n\n\n}\n","/**\n * Created by Tomas Kulhanek on 9/6/16.\n */\n\nimport {AControl} from './acontrol';\n\nexport class Dropboxcontrol extends AControl {\n\n    constructor() {\n       super();\n        this.heading=\"DROPBOX connector\";\n        this.CLIENTID = \"x5tdu20lllmr0nv\";\n        this.showdropboxbutton = false;\n        this.servicecontext = \"dropboxconnector\";\n        this.dropBoxAuthUrl = \"\";\n    }\n\n    attached() {\n        console.log('dropbox');\n        console.log(Dropbox);\n        if (this.isAuthenticated()) {\n            this.showdropboxbutton = false;\n            this.usertoken = this.getAccessTokenFromUrl();\n            this.addservice('dropboxconnector');\n        } else {\n          console.log(\"dropboxcontrol.attached()\");\n          console.log(this.dialogstateentry);\n          console.log(this.dialogstate);\n            console.log(this.CLIENTID);\n            this.showdropboxbutton = true;\n            console.log(this.showdropboxbutton);\n\n            var dbx = new Dropbox({clientId: this.CLIENTID});\n            console.log(dbx);\n            var currentUrl = window.location.href;\n            console.log('current url:' + currentUrl);\n            this.dropBoxAuthUrl = dbx.getAuthenticationUrl(currentUrl);\n            console.log(this.dropBoxAuthUrl);\n        }\n        super.attached();\n    }\n\n    failcallback(myresponse) {\n        this.updatedropboxstate(1);\n        this.status = \"fail:\";\n        if (myresponse.output) {\n            this.status += myresponse.output;\n        }\n    }\n\n    okcallback() {\n        this.status = \"OK\";\n        this.updatestate(3);\n    }\n\n    // Parses the url and gets the access token if it is in the urls hash\n    getAccessTokenFromUrl() {\n        return this.parseQueryString(window.location.hash).access_token;\n    }\n\n    // If the user was just redirected from authenticating, the urls hash will\n    // contain the access token.\n    isAuthenticated() {\n        return !!this.getAccessTokenFromUrl();\n    }\n}\n","export default {\n  debug: true,\n  testing: false\n};\n","import environment from './environment';\n\n\nexport function configure(aurelia) {\n  aurelia.use\n    .basicConfiguration();\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/**\n * Created by Tomas Kulhanek on 12/8/16.\n */\nimport {HttpClient} from 'aurelia-http-client';\nimport {AControl} from './acontrol';\nlet client = new HttpClient();\n\nexport class Onedrivecontrol extends AControl {\n\n  constructor() {\n    super();\n    this.heading = \"ONEDRIVE connector\";\n    this.clientid = \"xUfizTokQv6mAiZ9sgzQnm0\";\n    this.servicecontext= \"onedriveconnector\";\n  }\n}\n","/**\n * Created by vagrant on 9/6/16.\n */\nimport {HttpClient} from 'aurelia-http-client';\n\nlet client = new HttpClient();\n\nexport class Actions {\n    constructor() {\n        client.configure(config=> {\n            config.withHeader('Accept', 'application/json');\n            config.withHeader('Content-Type', 'application/json');\n        });\n    }\n\n    attached() {\n    }\n\n    help(){\n    }\n\n    menu(){\n    }\n\n    view(){\n    }\n\n    edit(){\n    }\n\n\n}\n\n","/**\n * Created by vagrant on 9/6/16.\n */\n\nimport {HttpClient} from 'aurelia-http-client';\n\n\nexport class App {\n\n    constructor() {\n        this.heading = \"File manager\";\n        this.viewpanel1 = false;\n        this.viewpanel2 = false;\n        this.showhelp = false;\n        this.fileurl = \"test1\";\n        this.myKeypressCallback = this.keypressInput.bind(this);\n\n    }\n\n    activate(){\n        window.addEventListener('keypress', this.myKeypressCallback, false);\n    }\n\n    deactivate() {\n        window.removeEventListener('keypress', this.myKeypressCallback);\n    }\n\n    // This function is called by the aliased method\n    keypressInput(e) {\n        console.log('keypressed');\n        if (e.key=='F1') this.help();\n        console.log(e);\n    }\n\n    doAction(fileitem,panelid) {\n        this.fileurl = fileitem.webdavuri;\n      console.log('app.doaction()');\n      console.log(this.fileurl);\n        if (panelid==\"filepanel1\") {\n            //hide filepanel2, show file\n            this.viewpanel2 = true;//!this.viewpanel2; //switch\n            if (this.childview2)\n            this.childview2.viewfile(fileitem.webdavuri);\n        } else {\n            this.viewpanel1 = true;//!this.viewpanel1; //switch\n            if (this.childview)\n                this.childview.viewfile(fileitem.webdavuri);\n\n        }\n    }\n    close1(){\n      this.viewpanel1=false;\n    }\n    close2(){\n      this.viewpanel2=false;\n    }\n    help(){\n        this.showhelp=!this.showhelp;\n    }\n}\n","export default {\n  debug: true,\n  testing: false\n};\n","/**\n * Created by vagrant on 9/28/16.\n */\n\nimport {HttpClient} from 'aurelia-http-client';\nimport {bindable, bindingMode, decorators} from 'aurelia-framework';\n\nlet client = new HttpClient();\n\n\nexport const FilepanelCustomElement = decorators (\n    bindable({ name: 'tableid', defaultBindingMode: bindingMode.oneTime }),\n    bindable('allowDestruction')\n     ).on(class {\n\n/*export class FilePanel {*/\n    constructor() {\n        this.files = [];\n        this.filescount = this.files.length;\n        this.path= \"\";\n        this.dynatable = {};\n        //not yet accessible here console.log(\"file panel constructed:\" + this.tableid);\n        //http to accept json\n        client.configure(config=>{\n            config.withHeader('Accept','application/json');\n            config.withHeader('Content-Type','application/json');\n        });\n    }\n\n    created(owningView,myview) {\n        this.parent = owningView;//.controller.viewModel;\n//        console.log('parent');\n//        console.log(this.parent);\n    }\n\n    //triggered after this object is placed to DOM\n    attached() {\n        //console.log(\"file panel attached:\" + this.tableid);\n\n        //read the directory infos\n        client.get(\"/metadataservice/sbfiles\")\n            .then(data => {\n                if (data.response) {\n                    this.populateFiles(data.response);\n\n                    this.dynatable = $('#'+this.tableid).dynatable({\n                        dataset: {\n                            records: this.files\n                        },\n                        features: {\n                            paginate: false,\n                            search: false,\n                            recordCount: false,\n                            perPageSelect: false,\n                            pushState:false\n\n                        }\n                    });\n                    //adds click listener to the table items\n                    let a = this;\n                    let b = this.parent.controller.viewModel;\n\n//                    console.log('b');\n//                    console.log(b);\n                    this.dynatable.on('click', 'tr', function () {\n                        if (this.children[1].innerText.endsWith('DIR')) //if directory in second column\n                            a.changefolder(this.firstChild.innerText);\n                        else {\n                            var fileitem = this.firstChild.innerText;\n                            var fileindex = a.files.map(function(e) {return e.name;}).indexOf(fileitem);\n                            console.log('fileitem');\n                            console.log(fileitem);\n                            console.log(fileindex);\n                            b.doAction(a.files[fileindex], a.tableid);//do some file related stuff\n                        }\n                    });\n                }\n            }).catch(error => {\n\n                console.log('Error');\n                console.log(error);\n                this.status=\"unavailable\";\n                this.showdialog=false;\n                alert('Sorry, response: '+error.statusCode+':'+error.statusText+' when trying to get: /metadataservice/sbfiles');\n            });\n    }\n\n    //parse .NET encoded Date in JSON\n    dateTimeReviver(key, value) {\n        var a;\n        if (typeof value === 'string') {\n            a = /\\/Date\\(([\\d\\+]*)\\)\\//.exec(value);\n            if (a) {\n                return new Date(parseInt(a[1])).toLocaleDateString('en-GB');\n            }\n        }\n        return value;\n    }\n\n    //removes last subdirectory\n    cdup(){\n        let sepIndex= this.path.lastIndexOf('/');\n        this.path = this.path.substring(0,sepIndex);\n    }\n\n    //adds subdirectory to the path\n    cddown(subdir) {\n        this.path+='/'+subdir;\n    }\n\n\n    //change folder, reads the folder content and updates the table structure\n    changefolder(folder){\n        if (!this.lock) {\n            this.lock = true;\n            if (folder) {\n                if (folder == '..') this.cdup();\n                else this.cddown(folder);\n            }\n            client.get(\"/metadataservice/sbfiles/\" + this.path)\n                .then(data => {\n                    if (data.response) {\n                        this.populateFiles(data.response);\n                        //update files in table view\n                        var d = this.dynatable.data('dynatable');\n                        d.settings.dataset.originalRecords = this.files;\n                        d.process();\n                        let a = this;\n                    }\n                    this.lock = false;\n                }).catch(error => {\n                console.log('Error');\n                console.log(error);\n                alert('Sorry, response: '+error.statusCode+':'+error.statusText+' when trying to get: /metadataservice/sbfiles'+this.path);\n                this.lock = false;\n            });\n        } //else doubleclick when the previous operation didn't finished\n    }\n\n    //refresh the file content\n    refresh() {\n        this.changefolder(); //changefolder with empty folder - just refresh\n    }\n\n    //parses response and fills file array with customization (DIRS instead of size number)\n    populateFiles(dataresponse){\n        this.files = JSON.parse(dataresponse,this.dateTimeReviver);//populate window list\n        this.filescount =  this.files.length;\n        if (this.path.length>0) {//non root path\n            this.files.unshift({name: \"..\", size: \"UP DIR\",date:\"\"}); //up dir item\n        }\n        this.files.forEach (function (item,index,arr){if (arr[index].attributes & 16) arr[index].size=\"DIR\"})\n        console.log(this.files);\n    }\n\n    doAction(fileitem) {\n      console.log(\"filepane.doaction()\");\n        console.log(fileitem.children);\n        this.parent.doAction(fileitem);\n    }\n\n}\n);\n\n\n\n","/**\n * Created by vagrant on 9/6/16.\n */\n\nimport {HttpClient} from 'aurelia-http-client';\nimport {bindable, bindingMode} from 'aurelia-framework';\n\n//import $ from 'doc/jquery-1.7.2.min';\n//import dynatable from 'doc/jquery.dynatable';\n\nexport class FileSettings {\n    constructor() {\n        this.heading = \"File View\";\n    }\n\n}\n\n","import environment from './environment';\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration();\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/**\n * Created by Tomas Kulhanek on 11/29/16.\n */\n\nimport {HttpClient} from 'aurelia-http-client';\n\nlet client = new HttpClient();\n\nexport class  Viewpanel {\n    constructor() {\n      this.fileurl=\"\";\n    }\n\n    attached(){\n        console.log('viewpanel.attached()')\n\n      if (this.bindingContext.viewpanel2) {\n        this.bindingContext.childview2 = this;\n        this.viewerdom = $('.fileviewer')[0]; //was[1] if.bind removes from DOM\n//        console.log(this.viewerdom);\n      }\n      if (this.bindingContext.viewpanel1) {\n        this.bindingContext.childview = this;\n        this.viewerdom = $(\".fileviewer\")[0];\n//        console.log(this.viewerdom);\n      }\n      if (this.bindingContext.fileurl) this.fileurl = this.bindingContext.fileurl;\n//        console.log(this.fileurl);\n      var options = {\n        width: 'auto',\n        height: 'auto',\n        antialias: true,\n        quality : 'medium'\n        // background='black', outlineColor='white'\n      };\n      // insert the viewer under the Dom element with id 'gl'.\n        console.log(this);\n        console.log(this.viewer);\n        if (!this.viewer)\n            this.viewer = pv.Viewer(this.viewerdom, options);\n            if (this.fileurl) this.viewfile();\n        }\n\n// override the default options with something less restrictive.\n    bind(bindingContext,overrideContext) {\n      //this.filetoview = this.fileurl;\n      console.log(\"bind(). fileurl:\");\n      console.log(this.fileurl);\n      console.log(this.viewid);\n      console.log(bindingContext);\n      console.log(overrideContext);\n      this.bindingContext = bindingContext;\n      //TODO ugly tight coupling -adding refs to itself to parent\n\n    }\n\n    viewfile(fileurl) {\n        if (fileurl) this.fileurl = fileurl;\n        console.log(\"viewFile(). fileurl:\");\n        console.log(this.fileurl);\n        if (this.fileurl && this.fileurl.endsWith('pdb')) {\n            this.loadfromurl(this.fileurl);\n            //loadlocalpdbfile();\n        }\n\n    }\n\n    created(owningView,myview) {\n        this.parent = owningView;//.controller.viewModel;\n//        console.log('viewpanel.created');\n//        console.log(this.parent);\n        //\n    }\n\n    // given the contents of a PDB file, show the structure\n    process(pdb) {\n\n        var structure = pv.io.pdb(pdb);\n        this.viewer.cartoon('protein', structure, { color : color.ssSuccession() });\n        this.viewer.centerOn(structure);\n    }\n\n    loadlocalpdbfile() {\n    }\n\n    loadpdbfile() {\n        var url = 'http://files.rcsb.org/view/' + this.pdbentry + '.pdb';\n        //console.log('loadpdbfile()');\n        this.loadfromurl(url)\n    }\n    loadfromurl(url) {\n        client.get(url)\n            .then(data => {\n    //            console.log('loadpdbfile()');\n      //          console.log(data);\n                this.process(data.response);\n            })\n            .catch(error => {\n                console.log(error);\n                alert('Sorry, response: '+error.statusCode+':'+error.statusText+' when trying to get: '+url);\n            });\n    }\n\n     loadfromredo() {\n       this.loadfromurl('http://www.cmbi.ru.nl/pdb_redo/'\n    +this.pdbentry2.substring(1,3)+'/'\n    +this.pdbentry2+'/'+this.pdbentry2+'_final.pdb')\n}\n\n}\n\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","/**\n * Created by Tomas Kulhanek on 1/6/17.\n */\nimport {HttpClient} from 'aurelia-http-client';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {SettingsSubmitted} from './messages';\n\n//let client = new HttpClient();\n\n/**\n * Aliastable component gets the currently registered aliases for file providers\n *\n */\nexport class Aliastable {\n  static inject = [EventAggregator,HttpClient];\n\n  constructor(ea,httpclient){\n    this.serviceurl = \"/metadataservice/files\";\n    ea.subscribe(SettingsSubmitted, msg => this.submitSettings(msg.settings) )\n    this.client=httpclient;\n    this.providers=[{alias:\"Loading available providers ...\",temporary:true}];\n    this.client.configure(config=> {\n      config.withHeader('Accept', 'application/json');\n      config.withHeader('Content-Type', 'application/json');\n    });\n  }\n\n  attached() {\n    //gets the status of the b2drop connection\n    this.client.get(this.serviceurl)\n      .then(data => {\n        console.log(\"data response\");\n        console.log(data);\n        if (data.response) {\n          this.providers = JSON.parse(data.response);\n        }\n      });\n  }\n\n  submitSettings(settings) {\n    this.client.put(this.serviceurl,JSON.stringify(settings))\n      .then(data =>{\n        console.log(\"data response\");\n        console.log(data);\n        if (data.response) {\n          this.providers = JSON.parse(data.response);\n        }\n      });\n  }\n\n}\n","import {EventAggregator} from 'aurelia-event-aggregator';\nimport {SettingsSubmitted, SettingsSelected} from './messages';\n\nexport class App {\n  static inject = [EventAggregator];\n\n  constructor(ea) {\n    this.showprovider = false;\n    ea.subscribe(SettingsSubmitted, msg => this.submitSettings(msg.settings) )\n    ea.subscribe(SettingsSelected, msg => this.selectSettings(msg.settings) )\n    // wait for assignement this.genericcontrol from children\n  }\n\n  newProvider(){\n    this.showprovider = true;\n  }\n\n  submitSettings(settings){\n    //console.log('addProvider: not yet implemented');\n    this.showprovider = false;\n    //get provider info from subcomponent\n  }\n\n  selectSettings(settings){\n    //console.log('addProvider: not yet implemented');\n    this.showprovider = true;\n    //get provider info from subcomponent\n  }\n\n}\n","/**\n * Created by Tomas Kulhanek on 1/10/17.\n */\n/**\n * Created by Tomas Kulhanek on 1/5/17.\n */\n\nimport {UrlUtils} from './urlutils';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {SettingsSelected} from './messages';\n\n//let client = new HttpClient();\n\nexport class DropboxControl {\n\n  static inject = [EventAggregator, UrlUtils];\n\n  constructor(ea,urlutils){\n    //this.dbx = dropbox;\n    // Parses the url and gets the access token if it is in the urls hash\n    this.ea= ea;\n    this.urlutils = urlutils;\n    this.accesstoken=this.urlutils.parseQueryString(window.location.hash).access_token;\n    this.isAuthenticated = !!this.accesstoken;\n    console.log('dropboxcontrol() accesstoken:'+this.accesstoken);\n    //instantiate dropboxclient - needed for getting URL to redirect\n    this.CLIENTID = \"x5tdu20lllmr0nv\";\n    var dbx = new Dropbox({clientId: this.CLIENTID});\n\n    var currentUrl = window.location.href;\n    console.log('dropboxcontrol() current url:' + currentUrl);\n    this.authurl = dbx.getAuthenticationUrl(currentUrl);\n    console.log(this.dropBoxAuthUrl);\n    this.id=\"Dropbox\";\n  }\n\n  initialize(){\n    if (this.isAuthenticated) {\n      var settings = {};\n      settings.type=this.id;\n      //settings.alias = this.alias;\n      settings.securetoken = this.accesstoken;\n      //else settings.username = this.username;\n      //if (this.password) settings.securetoken = this.password;\n      this.ea.publish(new SettingsSelected(settings));\n    }\n  }\n\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","/**\n * Created by Tomas Kulhanek on 1/5/17.\n */\nimport {HttpClient} from 'aurelia-http-client';\nimport {computedFrom} from 'aurelia-framework';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {SettingsSubmitted} from './messages';\nimport {DropboxControl} from './dropboxcontrol';\nimport {SettingsSelected} from './messages';\n\nexport class Genericcontrol {\n\n  static inject = [EventAggregator, HttpClient,DropboxControl];\n\n\n  constructor(ea,httpclient,dropboxcontrol) {\n    this.heading=\"File Provider\";\n    this.ea= ea;\n    this.dropboxcontrol=dropboxcontrol;\n\n    this.servicecontext = \"providers\";\n    this.knowtoken=false;\n    this.dropboxauthurl = \"\";\n    this.providers = [];\n    this.selectedProvider=\"\";\n    console.log('genericcontrol()');\n    this.client=httpclient;\n    this.client.configure(config=> {\n      config.withHeader('Accept', 'application/json');\n      config.withHeader('Content-Type', 'application/json');\n    });\n    this.ea.subscribe(SettingsSelected, msg => this.selectSettings(msg.settings) )\n  }\n\n  @computedFrom('selectedProvider')\n  get selectedDropbox() {\n//    this.securetoken=\"\";\n    this.username=\"\";\n    this.password=\"\";\n    return this.selectedProvider==this.dropboxcontrol.id;\n  }\n\n  @computedFrom('selectedProvider')\n  get selectedB2Drop() {\n//    this.securetoken=\"\";\n    this.username=\"\";\n    this.password=\"\";\n    return this.selectedProvider=='B2Drop';\n  }\n\n  @computedFrom('selectedProvider')\n  get selectedFileSystem() {\n//    this.securetoken=\"\";\n    this.username=\"\";\n    this.password=\"\";\n    return this.selectedProvider=='FileSystem';\n  }\n\n  get knowntoken(){\n    if (this.knownSecureToken) return this.knownSecureToken.checked;\n  }\n\n  attached() {\n    console.log('genericcontrol.attached()');\n    console.log(\"dialogstate:\"+this.dialogstate);\n    //attach parent with the instance\n    //this.bindingContext.genericcontrol = this;\n    //gets the status of the b2drop connection\n    this.dropboxauthurl = this.dropboxcontrol.authurl;\n    this.client.get(\"/metadataservice/\"+this.servicecontext)\n      .then(data => {\n        console.log(\"data response\");\n        console.log(data);\n        if (data.response) {\n          this.providers = JSON.parse(data.response);\n        }\n      });\n    this.dropboxcontrol.initialize();\n  }\n\n  addProvider() {\n     var settings = {};\n     settings.type=this.selectedProvider;\n     settings.alias = this.alias;\n     if (this.selectedDropbox || this.selectedFileSystem) settings.securetoken = this.securetoken;\n     else settings.username = this.username;\n     if (this.password) settings.securetoken = this.password;\n     console.log(\"publishing\");\n     this.ea.publish(new SettingsSubmitted(settings));\n  }\n\n  selectSettings(settings){\n    this.selectedProvider=settings.type;\n    this.alias=settings.alias;\n    this.securetoken=settings.securetoken;\n    if (!!this.securetoken) { this.knownSecureToken.checked=true; }\n  }\n\n}\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/**\n * Created by Tomas Kulhanek on 1/9/17.\n */\n\nexport class SettingsSubmitted {\n  constructor(settings){\n    this.settings = settings;\n  }\n}\n\nexport class SettingsSelected {\n  constructor(settings){\n    this.settings = settings;\n  }\n}\n\n","/**\n * Created by Tomas Kulhanek on 1/10/17.\n */\n\nexport class UrlUtils {\n\n  constructor() {}\n\n  parseQueryString(str) {\n    var ret = Object.create(null);\n\n  if (typeof str !== 'string') {\n    return ret;\n  }\n\n  str = str.trim().replace(/^(\\?|#|&)/, '');\n\n  if (!str) {\n    return ret;\n  }\n\n  str.split('&').forEach(function (param) {\n    var parts = param.replace(/\\+/g, ' ').split('=');\n    // Firefox (pre 40) decodes `%3D` to `=`\n    // https://github.com/sindresorhus/query-string/pull/37\n    var key = parts.shift();\n    var val = parts.length > 0 ? parts.join('=') : undefined;\n\n    key = decodeURIComponent(key);\n\n    // missing `=` should be `null`:\n    // http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n    val = val === undefined ? null : decodeURIComponent(val);\n\n    if (ret[key] === undefined) {\n      ret[key] = val;\n    } else if (Array.isArray(ret[key])) {\n      ret[key].push(val);\n    } else {\n      ret[key] = [ret[key], val];\n    }\n  });\n\n  return ret;\n}\n\n}\n",null,null,null,null,null,null,null,null,null,null,null,null,null],"sourceRoot":"../src"}